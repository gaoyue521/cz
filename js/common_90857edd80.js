"use strict";appsServices.factory("Utils",["$rootScope","$q","$http","$location","$cookies","DialogService",function(e,t,o,i,a,r){var n={};return n.truncateChars=function(e,t,o,i){if(e){var a=e.replace(/[\u4e00-\u9fa5\s]/g,"**").length,r=[],n=0;if(i){var s=$("<div></div>").html(e);e=s.text(),s=null}if(a<=t)return e;for(var c=0;c<a;c++){var l=e.charAt(c);if(n+=/[^\x00-\xff]/.test(l)?2:1,r.push(l),n>=t)break}return o?r.join("")+"...":r.join("")}return""},n.encodeUriQuery=function(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,t?"%20":"+")},n.toKeyValue=function(e){var t=this,o=[];return angular.forEach(e,function(e,i){angular.isArray(e)?angular.forEach(e,function(e){o.push(t.encodeUriQuery(i,!0)+(e===!0?"":"="+t.encodeUriQuery(e,!0)))}):o.push(t.encodeUriQuery(i,!0)+"="+t.encodeUriQuery(e,!0))}),o.length?o.join("&"):""},n.shareWeibo=function(e,t,o,i,a){var r=e||$(".share-btn"),n=null;n=a?encodeURIComponent(a):encodeURIComponent(location.href);var s=o||"",c="http://service.weibo.com/share/share.php?appkey=",l=i||$(".share-weibo-cover").attr("src"),u=encodeURIComponent(this.truncateChars(s,232,!0));c+="&title="+u,c+="&url="+n,l&&(c+="&pic="+encodeURIComponent(l)),r.attr("href",c)},n.setTitle=function(e,t){var o=window.navigator.userAgent;"undefined"==typeof t?document.title=e:document.title=e+" - "+t,window.onParseHtml&&/SmartisanSupport/.test(o)&&window.onParseHtml.setTitleBar(e)},n.setKeywords=function(e){e&&""!==e&&$("meta[name='keywords']").attr({content:e})},n.setDescription=function(e){e&&""!==e&&$("meta[name='description']").attr({content:e})},n.setMobileTitle=function(t){var o="";"undefined"==typeof t.text?o="en"==e.lang?'<a href="http://www.smartisan.com/en/#/home"><span class="logo-pic"></span></a>':'<a href="http://www.smartisan.com/#/home"><span class="logo-pic"></span></a>':o+="undefined"==typeof t.url?t.text:'<a href="'+t.url+'">'+t.text+"</a>",$(".mobile-title").html(o)},n.setCrumbs=function(e){for(var t="",o=0;o<e.length;o++)t+="undefined"==typeof e[o].url?e[o].title:'<a href="'+e[o].url+'">'+e[o].title+"</a>",o+1<e.length&&(t+='<span class="arrow"></span>');$(".header-crumbs").length?$(".header-crumbs").html(t):$(".breadcrumb").html(t)},n.setT1Crumbs=function(e,t){e&&$(".header-sub .breadcrumb").removeClass("hide");var o="";t&&(o+='<h2 class="phone-logo"></h2>'),o+='<ul class="t1Crumbs">';for(var i=e.currentPage,a=0;a<e.list.length;a++){var r="";i&&e.list[a].url.indexOf(i)>0&&(r="on"),o=o+'<li class="'+r+'"><a href="'+e.list[a].url+'">'+e.list[a].title+"</a></li>"}o+="</ul>",$(".breadcrumb").html(o)},n.setTCrumbs=function(e,t,o){e&&$(".header-sub .breadcrumb").removeClass("hide");var i="";o&&(i+='<h2 class="device-logo"></h2>'),t||(t="device-nav"),i+='<ul class="'+t+'">';for(var a=e.currentPage,r=0;r<e.list.length;r++){var n="";a&&e.list[r].url.indexOf(a)>0&&(n="active"),i=i+'<li class="'+n+'"><a href="'+e.list[r].url+'">'+e.list[r].title+"</a></li>"}i+="</ul>",$(".breadcrumb").html(i)},n.openServiceWindow=function(){if(this.isMobile())_MEIQIA._SHOWPANEL({groupToken:"9aea609f9936e156d06f97654413fbb2"});else{var e=decodeURIComponent("https://static.meiqia.com/dist/standalone.html?eid=8921"),t=$('<a><span id="meiqia-a"></span></a>');t.attr("href",e).attr("target","_blank"),$("body").append(t),$("#meiqia-a").click()}},n.showMore=function(e,t){var o=e.height(),i=e.find("h3").outerHeight()+e.find("ul").outerHeight();i>o&&(t.css({display:"block"}),t.bind("click",function(){e.find(".feature-wrapper").css({height:"auto"}),t.hide()}))},n.isMobile=function(){var e=window.devicePixelRatio||1;return $(window).width()<=736&&(screen.width<=736||e>=2)},n.matchModules=function(e,t){var o=null;return e&&(o=t?new RegExp("/"+e+"/#/"+t,"gi"):new RegExp("/"+e+"/#/","gi")),!!o&&o.test(i.$$absUrl)},n.matchMobileCategoryName=function(e){var t="";return/^坚果.*Pro/gi.test(e)?t="nutsPro":/^Smartisan.*M1/gi.test(e)?t="m1":/^坚果手机/gi.test(e)?t="nuts":/^Smartisan.*T1/gi.test(e)?t="t1":/^Smartisan.*T2/gi.test(e)&&(t="t2"),t},n.matchHost=function(e){var t=e||"www.smartisan.com";return i.$$host===t},n.isSupportWebP=function(){var e,t=document.createElement("canvas"),o=a.get("_webp");return void 0===o&&(e=new Date,e.setDate(e.getDate()+30),o=t.toDataURL&&t.toDataURL("image/webp").indexOf("data:image/webp")>-1?1:0,a.put("_webp",o,{path:"/",domain:"smartisan.com",expires:e})),1==o},n.isUCMobile=function(){var e=window.devicePixelRatio||1,t=navigator.userAgent.toLowerCase(),o=/(ucweb)|(ucbrowser)/i.test(t);return!!($(window).width()<=736&&(screen.width<=736||e>=2)&&o)},n.isWeixin=function(){var e=navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)},n.isMobileQQ=function(){var e=navigator.userAgent.toLowerCase();return"qq/"==e.match(/qq\//i)},n.isIphone=function(){var e=navigator.userAgent.toLowerCase();return"iphone"==e.match(/iphone/i)},n.isAndroid=function(){var e=navigator.userAgent.toLowerCase();return"android"==e.match(/android/i)},n.mobileGuide=function(e){function t(){n.show(),setTimeout(function(){var e=s>i.height()?s:i.height();n.css({height:e})},700),n.bind("click",function(){n.hide()})}var o=this,i=$(document.body),a=$("#download-android"),r=$("#download-iPhone"),n=$("#mobileGuide"),s=window.screen.availHeight;this.isWeixin()||this.isMobileQQ()||this.isIphone()||!r.attr("href")||!r.attr("href").match(/^http/)||$(".desc-download .for-iphone").attr("target","_blank"),this.isWeixin()&&(o.isIphone()?r.bind("click",function(e){return t(),n.find("img").hide(),n.find(".guide-iOS-download").show(),!1}):a.bind("click",function(e){return t(),n.find("img").hide(),n.find(".guide-android-download").show(),!1})),location.href.match(/\QR_download|\qr=1/)?this.isAndroid()?this.isWeixin()||this.isMobileQQ()?(t(),n.find(".guide-android-download").show()):setTimeout(function(){location.href=a.attr("href")},2e3):this.isIphone()&&(this.isWeixin()||this.isMobileQQ()?(t(),n.find(".guide-iOS-download").show()):setTimeout(function(){location.href=r.attr("href")},2e3)):location.href.match(/\QR_share/)&&(this.isWeixin()||this.isMobileQQ())&&(t(),this.isIphone()?n.find(".guide-iOS-share").show():this.isAndroid()&&n.find(".guide-android-share").show())},n.changeLangCookies=function(t){var o=t.target.href,i=o.match(/(en|jp|cn)+/i)[1],r=location.href.match(/m1|jianguo|u1|t2|t1|apps+/i),n=null!=$(t.target).closest(".header")[0],s=null!=$(t.target).closest(".footer")[0];if(s){if("www.smartisan.com"!==location.host){t.preventDefault();var c="/modules/";l=location.href.indexOf(c),u=location.href.slice(0,l+c.length),u=u+"index/#/?lang="+i,location.href=u,setTimeout(function(){window.location.reload()},200)}}else if(n)if("www.smartisan.com"!==location.host){if(t.preventDefault(),location.href.indexOf("/"+r+"/")!=-1){var l=location.href.indexOf("/"+r+"/"),u=location.href.slice(0,l);u=u+"/"+r+"/#/overview?lang="+i}else l=location.href.indexOf(c),u=location.href.slice(0,l+c.length),u=u+"index/#/?lang="+i;location.href=u,setTimeout(function(){window.location.reload()},200)}else{t.preventDefault();var m="http://www.smartisan.com/";location.href.indexOf("/apps/")!=-1?u="/apps/":location.href.indexOf("/"+r+"/")!=-1?("jianguo"!=r&&"u1"!=r||(r="cn"==i?"jianguo":"u1"),u="/"+r+"/#/overview"):u="/",u=m+i+u,location.href=u}else{var g=location.href.match(/\/handshaker|\/os|\/notes|\/calendar+/i);if("www.smartisan.com"!==location.host){t.preventDefault();var l=location.href.indexOf("/"+r+"/"),u=location.href.slice(0,l);null==g&&"en"==e.lang&&(g="/handshaker"),u=u+"/"+r+"/#"+g+"?lang="+i,location.href=u,setTimeout(function(){window.location.reload()},200)}else{t.preventDefault(),"en"==e.lang&&null==g&&(g="/handshaker");var m="http://www.smartisan.com/";u="/apps"+g,u=m+i+u,location.href=u}}o.indexOf("en")===-1?a.put("lang","zh-CN",{path:"/",domain:"smartisan.com"}):a.put("lang","en-US",{path:"/",domain:"smartisan.com"})},n.setHeaderActive=function(t){e.navLinkActive=t},n.getServerTime=function(){var e=t.defer(),o="http://setting.smartisan.com/info/time?jsonp=1",i=null;return $.ajax({type:"get",dataType:"jsonp",url:o,success:function(t){t&&0==t.code&&t.data.timestamp&&(i=parseInt(t.data.timestamp)),e.resolve({now:i})},error:function(){e.resolve({now:null})}}),e.promise},n.isMSIE=function(e){var t=navigator.userAgent,o="MSIE ",i=/MSIE (\w+)+/gi.exec(t);return e?t.indexOf(o+e)>-1:!(!i||!i[1])&&Number(i[1])},n.openDialog=function(e,t){var o={message:"",templateObj:null,doneText:"确定",hasBtn:!0};o=angular.extend({},o,e),r.setContent("dialog",o).open("dialog",function(){r.close(),t&&t()})},n}]),appsServices.constant("Config",{baseUrl:"/index.php?r=",imgUrl:"http://img01.smartisanos.cn/",URI:{midWare:"http://www.smartisan.com/product/",__midWare:"http://product-gateway.smartisan.com/product/",base:"/index.php?r=",store:"/store/index.php?r=",beike:"/beike/index.php?r=",serv:"/store/serv/v1/",cart:"/cart/serv/v1/cart/",quick:"/"},headconfig:{def:{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"}},raw:{headers:{"Content-Type":"application/json;charset=utf-8"}}},storeUrl:"http://store.smartisan.com/#/",cookiesProperties:{domain:window.location.host.indexOf("smartisan.com")>=0?".smartisan.com":"localhost",path:"/"},isProduction:window.location.host.indexOf("www.smartisan.com")>-1,regExp:{isMobile:/^1[3|4|5|7|8]\d{9}$/,isMail:/^[\w.%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}$/,isPassword:/^[\w\\\[\]\:\^\-~!@#$%&*()-+={}|;'",.\/<>?]{6,16}$/,isSafeUrl:/^(http|https)\:\/\/[a-zA-Z0-9\-\.]+\.(smartisan.com\b)(:[a-zA-Z0-9]*)?\/?([a-zA-Z0-9\-\._\?\,\'\/\\\+&amp;%\$#\=~])*$/,isIMEI:/^\d{15}$|^\d{14}$/,isMAC:/^([0-9a-fA-F]{2})(([\s:][0-9a-fA-F]{2}){5})$/,numOrEn:/^[0-9a-zA-Z]+$/,errorStr:/^[^\&\<\>]*$/},getDPR:function(){var e=window.devicePixelRatio,t="1x";return e&&(e>1&&e<=2?t="2x":e>2&&(t="mobile")),t},getDomain:function(){return window.location.host.indexOf("smartisan.com")>=0?"smartisan.com":"localhost"}}).constant("ACCESS_LEVELS",{pub:1,user:2,cloud:3,alpha:4}),appsServices.factory("Message",["$rootScope","Account","User","$location","Utils","$timeout",function(e,t,o,i,a,r){var n=function(n){var s=null,c=n.originalEvent;c.origin==t.config.origin&&"isLoggedOut"==c.data&&(t.close(),o.logout(),s=r(function(){e.$broadcast("cart",{name:"empty",callback:function(){r.cancel(s),"/cart"===i.$$path&&(a.matchHost()?location.href="/#/shop":location.href="/smartisan/modules/index/#/")}})},0))};return{handler:n}}]),appsServices.factory("Account",["$window",function(e){var t={},o={wrapper:"body",origin:"https://account.smartisan.com",loginUrl:"https://account.smartisan.com/#/v2/login",logoutUrl:"https://account.smartisan.com/#/logout/embed",cartSync:!1},i=function(){if(!t.wrapper){var e=[];e.push('<div class="iframe-dialog" id="iframe-dialog">'),e.push('<div class="mask"></div>'),e.push('<iframe allowtransparency="true" src="" frameborder="0"></iframe>'),e.push("</div>"),t.wrapper=$(o.wrapper),t.wrapper.append(e.join(""))}t.mask=$("#iframe-dialog .mask"),t.iframe=$("#iframe-dialog iframe")},a=function(){t.iframe&&(t.mask.hide(),t.iframe.removeClass("show"),t.iframe.attr("src",""))},r=function(t){var i=t||e.location.href;e.location.href=o.loginUrl+"?return_url="+encodeURIComponent(i)},n=function(){var a=o.logoutUrl;i(),t.iframe.attr("src",a+"?origin="+e.location.origin||e.location.protocol+"//"+e.location.hostname)},s=function(e){o=angular.extend(o,e||{})};return{config:o,close:a,login:r,logout:n,set:s}}]),appsServices.factory("User",["$rootScope","$q","$http","$location","Config","ACCESS_LEVELS","CartRequest","$cookies",function(e,t,o,i,a,r,n,s){var c={},l=function(){var o=t.defer();return n.checkAccount({fields:"avatar_url,nickname,cellphone,t1_gift"}).then(function(t){0==t.code?(e.isLoggedIn=!0,e.$broadcast("login"),o.resolve(t)):(e.isLoggedIn=!1,o.reject(t))},function(){o.reject("网络异常!")}),o.promise};return{getInfo:l,isLoggedIn:function(){return!!c.uid},getUser:function(){return c},getId:function(){return c?c.uid:null},logout:function(){c={},e.isLoggedIn=!1,e.$broadcast("logout")}}}]),appsServices.factory("BaseInfo",["$rootScope","$q","$cookies","User","Account","Utils","$timeout",function(e,t,o,i,a,r,n){var s=function(){var a=t.defer();return i.getInfo().then(function(t){var i=!1;if(e.loginUser=t.data,!r.isMobile()&&0==t.code&&t.data.t1_gift&&parseInt(t.data.t1_gift)>0?(n(function(){e.loginUser.t1GiftNum=t.data.t1_gift},1e3),i=!0):e.loginUser.t1GiftNum=0,e.isLoggedIn){var s=o.get("couponNotice");!s&&i&&n(function(){var e=$(".main .notice-dialog");e.length>0&&(e.show().delay().toggleClass("on",!0),o.put("couponNotice",1,{domain:".smartisan.com",path:"/"}),e.find(".notice-close").on("click",function(t){t.preventDefault(),e.remove()}))},200)}a.resolve()},function(){a.reject()}),a.promise};return{update:s}}]),appsServices.factory("Language",["$rootScope","$cookies","$window","$location",function(e,t,o,i){var a=window.location.pathname.match(/\/(jp|en|cn)\//i),r=function(){a?e.lang=a[1]:i.search().lang?e.lang=i.search().lang:e.lang="cn",e.langStatic="cn"===e.lang?"":e.lang+"/"};return{init:r}}]),appsServices.provider("Navigator",{isMobile:!1,language:"cn",browser:null,init:function(){this.setMobile(),this.setLanguage()},setMobile:function(){var e=window.devicePixelRatio||1;this.isMobile=$(window).width()<=736&&(screen.width<=736||e>=2)},setLanguage:function(){var e=window.location.pathname.match(/\/(jp|en|cn)\//i);e?this.language=e[1]:location.href.indexOf("?lang=")!=-1?this.language=location.href.split("?lang=")[1]:this.language="cn"},$get:function(){var e=this;return{language:e.language,isMobile:e.isMobile}}}),appsControllers.factory("NavigationMenu",["$q","CartRequest",function(e,t){var o={getCategories:function(){var o=e.defer();return t.getCategoryList().then(function(e){var t,i=[];if(0==e.code){t=e.data.list;for(var a=0;a<t.length;++a)1==t[a].is_show&&i.push({id:t[a].id,title:t[a].name,url:t[a].info.url,isMobile:!1});o.resolve(i)}else o.resolve([])}),o.promise}};return{subMenu:o.getCategories}}]),appsServices.factory("TitleBar",["$rootScope","$location",function(e,t){var o=null,i=function(e){"logo"==e?($(".title-bar .nav-logo").removeClass("hide"),$(".title-bar .nav-title").addClass("hide")):($(".title-bar .nav-title").html(e),$(".title-bar .nav-logo").addClass("hide"),$(".title-bar .nav-title").removeClass("hide"))},a=function(t){e.navMenuName=t};return{setOptions:function(e){e=e||{};var t=e.title||"logo",o=e.toggle||"toggle";e.theme||"";i(t),a(o)},init:function(){o=new IScroll("#nav-drawer",{tap:"mobileNavTap"});var i=function(o){for(var i=o.target;"span"==i.tagName.toLowerCase();)i=i.parentNode;if("a"==i.tagName.toLowerCase()){var a=$(i),r=a.attr("href");a.addClass("active"),setTimeout(function(){/^#\//.test(r)?e.$apply(function(){t.url(r.split("#")[1])}):window.location.href=r},10),setTimeout(function(){$(".nav-drawer").removeClass("active"),a.removeClass("active")},300)}};$("#nav-drawer").on("mobileNavTap",i),$(".title-bar").on("touchmove",function(e){e.preventDefault()}),$(".header-mobile .nav-toggle").on("touchend",function(e){var t=e.originalEvent.changedTouches;$(".nav-drawer").toggleClass("active"),t&&t.length&&$(".nav-drawer").hasClass("active")&&(o.scrollTo(0,0),o.refresh())})},toggleBackDrawer:function(){o&&$(".nav-drawer").hasClass("active")&&$(".nav-drawer").toggleClass("active")}}}]),appsServices.factory("DialogService",["$rootScope","$animate",function(e,t){var o={},i={},a=function(){},r=function(){},n=function(){},s="",c="",l="",u={mark:"",isLayer:!0,isCenter:!1,once:!1,top:!1,title:"提示",dialogClass:"module-dialog-confirm",doneText:"确定",cancelText:"取消",template:"",templateUrl:"",templateData:null,hasBtn:!0,useBtn:!1,hasCancel:!1,params:{},content:null,done:null,cancel:null,closeFn:null};return{setContent:function(a,r){function n(e,t){return angular.element((t||document).querySelectorAll(e))}s=e.isMobile?".m-module-dialog":".module-dialog",c=e.isMobile?"m-module-dialog-show":"module-dialog-show",i[a].dialogContent=angular.extend({},u,r);var l=n(".js-dialog-container",o[a][0]);l[0]&&l[0].lastChild?angular.element(l[0].lastChild):null;return l.html(""),angular.isObject(i[a].dialogContent.templateObj)?t.enter(i[a].dialogContent.templateObj,l):t.enter($('<div class="confirm-msg">'+i[a].dialogContent.message+"</div>"),l),this},open:function(t,u,m,g){var d=this;a=function(){d.close()},r=function(){d.close()},n=function(){d.close()},angular.isFunction(u)?(a=u,i[t].dialogContent.dialogConfirm=u):i[t].dialogContent.dialogConfirm=d.close,angular.isFunction(m)?(r=m,i[t].dialogContent.dialogCancel=m):i[t].dialogContent.dialogCancel=d.close,angular.isFunction(g)&&(n=g,i[t].dialogContent.dialogCustom=g),l=t,o[l]&&(o[l].find(s).removeClass(c),o[l].find(".module-dialog-layer").hide()),o[l].find(".module-dialog-layer").show(),o[l].find(s).show(20).delay().addClass(c),setTimeout(function(){$("body").one("click.dialog",function(){$(document).off("keyup.dialog")}),$(document).one("keyup.dialog",function(o){27===o.keyCode?($("body").off("click.dialog"),e.$apply(function(){i[t].dialogContent.dialogCancel()})):13===o.keyCode&&e.$apply(function(){i[t].dialogContent.dialogConfirm()})})},1)},close:function(){$("body").off("click.dialog"),$("body").css("overflow","auto"),$(document).off("keyup.dialog"),o[l].find(s).removeClass(c),setTimeout(function(){o[l].find(s).hide(),o[l].find(".module-dialog-layer").hide()},190)},cancel:function(){r()},confirm:function(){a()},custom:function(e){n(e)},addDom:function(e,t,a){o[e]=t,i[e]=a}}}]),appsFilters.filter("to_HTML",["$sce",function(e){return function(t,o){return o&&(t=t.replace(o,"")),e.trustAsHtml(t)}}]),appsDirectives.directive("changeLanguage",["$document",function(e){return{restrict:"A",link:function(t,o,i,a){o&&(o.on("click",function(e){var t=$(e.target).closest(".language-switch");return t.toggleClass("active"),!1}),e.on("click",function(e){var t=$(e.target);t.closest(".language-switch").is(".language-switch")||$(".language-switch").removeClass("active")}))}}}]).directive("preventCall",["$document",function(e){return{restrict:"A",link:function(e,t,o,i){if(t){var a=navigator.userAgent.toLowerCase();t.on("click",function(){if(/windows/.test(a))return!1})}}}}]).directive("mobileFooter",["$document","Utils",function(e,t){return{restrict:"A",link:function(e,o,i,a){o&&t.isMobile()&&(o.find("h3").on("click",function(){$(this).parent().toggleClass("active"),$(this).siblings().slideToggle(300,jQuery.easing.easeOutCubic),$(this).parent().siblings().removeClass("active"),$(this).parent().siblings().children("ul").slideUp(300,jQuery.easing.easeOutCubic)}),o.find("ul li:not(.weixin)").on("click",function(){var e=$(this).children().attr("href");window.location.href=e}))}}}]).directive("showWeixinCode",["$document","Utils",function(e,t){return{restrict:"A",link:function(e,t,o,i){t&&t.find("a").on("click",function(){var e=$(this).parent(".weixin");e.addClass("active"),e.find(".mask").one("click",function(){e.removeClass("active")}),e.find(".close-btn").one("click",function(){e.removeClass("active")}),document.onkeydown=function(t){var o=t||window.event;o&&27==o.keyCode&&e.removeClass("active")}})}}}]).directive("openServiceWindow",["$document","Utils",function(e,t){return{restrict:"A",link:function(e,o,i,a){o&&o.on("click",function(e){e.preventDefault(),t.getServerTime().then(function(e){var o=new Date(1e3*e.now).getHours();o>17||o<9?t.openDialog({message:"您好，官网在线人工服务时间为早上 9 点至晚上 6 点，请您在工作时间与我们联系，感谢您的支持与理解。",dialogClass:t.isMobile()?"m-module-dialog-customer-service":"module-dialog-customer-service",doneText:"确认"}):t.openServiceWindow()})})}}}]).directive("mobileNavShow",["$document",function(e){return{restrict:"A",link:function(e,t,o,i){t&&$(document).on("touchend",".mobile-topbar .nav-toggle",function(e){var t=e.originalEvent.changedTouches;return t&&t.length&&($("html").toggleClass("mobile-noscroll"),$(".wrapper").removeClass("moblie-quick-nav"),$(".wrapper").toggleClass("moblie-show-nav")),!1})}}}]).directive("backTop",["$document",function(e){return{restrict:"A",link:function(e,t,o,i){t&&($(window).on("scroll",function(){$(window).scrollTop()>600?(t.addClass("active"),o.offset&&t.css("-webkit-transform","translate3d(0,"+o.offset+"px,0)")):(t.removeClass("active"),o.offset&&t.css("-webkit-transform",""))}),t.on("click",function(){$("html, body").animate({scrollTop:0},{queue:!1},500)}))}}}]).directive("bgCover",["$document","$rootScope","Utils",function(e,t,o){return{restrict:"A",link:function(e,t,i,a){t&&!o.isMobile()}}}]).directive("accountReservation",["$document","Utils",function(e,t){return{restrict:"A",link:function(e,o,i,a){o&&t.isMobile()&&o.on("click",function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")})}}}]).directive("routeChangeResetFooter",[function(){return{restrict:"A",controller:["$element","$rootScope",function(e,t){t.$on("$routeChangeStart",function(){e.find(".language-switch").removeClass("active")})}]}}]).directive("copyrightYear",[function(){return{restrict:"A",link:function(e,t,o,i){var a=new Date,r=a.getFullYear(),n=a.getMonth()+1,s=2017;2016==r&&12==n&&(s=2016),$(t).html(s)}}}]).directive("jQrcode",["$timeout","Utils",function(e,t){return{restrict:"A",link:function(e,t,o,i){t&&(document.createElement("canvas").getContext?setTimeout(function(){$(t).empty(),$(t).qrcode({render:"canvas",width:110,height:110,text:o.qrcode})},300):$(t).append('<img src="'+o.src+'">'))}}}]).directive("titleBar",["TitleBar","Utils","$rootScope",function(e,t,o){return{restrict:"EA",link:function(i,a,r,n){o.mTitleBar={},i.titleBar=i.titleBar||{navList:[]},i.goBack=function(){var e=o.mTitleBar.preventDefault;history.length?e?o.$emit("goBack",!0):history.back(-1):window.location.href="http://www.smartisan.com/"},i.editList=function(){a&&o.$broadcast("isEditCart",{status:!0})},i.editDone=function(){a&&o.$broadcast("isEditCart",{status:!1})},t.isMobile()&&e.init()}}}]).directive("retinaSrc",["$window","$http",function(e,t){function o(e){var t=e.split(".");return t.length<2?e:(t[t.length-2]+=i,t.join("."))}var i="@2x",a=/^data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/,r=parseInt((/msie (\d+)/.exec(e.navigator.userAgent.toLowerCase())||[])[1],10),n=function(){var t="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return e.devicePixelRatio>1||e.matchMedia&&e.matchMedia(t).matches}();return{restrict:"A",scope:{retinaSrc:"@"},link:function(i,s,c,l){function u(t){var o=e.sessionStorage.getItem(t);return o}function m(t,o){e.sessionStorage.setItem(t,o)}function g(e){c.$set("src",e),r&&s.prop("src",e)}function d(e){var i;i=angular.isUndefined(c.at2x)?u(e):c.at2x,i?g(i):(i=o(e),t.head(i).success(function(t,o){g(i),m(e,i)}).error(function(t,o,i,a){g(e),m(e,e)}))}i.$watch("retinaSrc",function(t){t&&(n&&t.indexOf("@2x.")==-1&&angular.isUndefined(c.noretina)&&"object"==typeof e.sessionStorage&&"IMG"===s[0].tagName&&!t.match(a)?d(t):g(t))})}}}]).directive("onLoad",function(){return{restrict:"A",scope:!0,link:function(e,t,o){t.bind("load",function(){e.$apply(o.onLoad)(!0,t)}),t.bind("error",function(){e.$apply(o.onLoad)(!1,t)})}}}),appsServices.constant("StoreConfig",{storeUrl:"http://store.smartisan.com/#/",storeUrlRest:"http://store.smartisan.com/index.php?r=",mStoreUrlRest:"http://m.store.smartisan.com/index.php?r=",postageTerm:150,postage:15,useGoodsDiscount:!1,goodsDiscount:{cover:{num:3,discount:48}},usePackage:!1,useAccessory:!1,accessoriesSpus:{m1:["1000223","1000228","1000136","1000225"],m1l:["1000223","1000228","1000136","1000225"]},accessoriesSkus:{m1:["100022301","100022303","100022801","100013608","100022501"],m1l:["100022302","100022304","100022801","100013608","100022501"]},accessoriesOffSale:["100022301","100022302","100022303","100022304","100022401","100022501","100022601","100022701","100022702","100022801","100022802"],jianguoPro128GStage:["100027303","100027305","100027306","100027308","100027310","100027312"],jianguoPro64GStage:["100027302","100027304","100027307","100027309","100027311"],SmartisanTShirtSpu:[1000261,1000264],jsonp520Time:1463661066,goodsDiscount520:{num:5,freeNum:2},discount618Spus:["1000262","1000254","1000255","1000256","1000257","1000259","1000260","1000261","1000264","1000265","1000318","1000319"],discount906Skus:["100025401","100025403","100025405","100025407","100025409","100025411","100025413","100025415","100025417","100025419","100025421","100025423","100025425","100025427","100025429","100025431","100025433","100025435","100025437","100025439","100025441","100025443","100025445","100025447","100025449","100025501","100025503","100025505","100025507","100025509","100025521","100025523","100025525","100025527","100025529","100025601","100025602","100025603","100025604","100025605","100025611","100025612","100025613","100025614","100025615","100025701","100025702","100025703","100025704","100025705","100025716","100025717","100025718","100025719","100025720","100025901","100025903","100025905","100025907","100025909","100025911","100025913","100025915","100025917","100025919","100026001","100026002","100026003","100026004","100026005","100026006","100026007","100026008","100026009","100026010","100026101","100026103","100026105","100026107","100026109","100026116","100026118","100026120","100026122","100026124","100026131","100026133","100026135","100026137","100026139","100026201","100026203","100026205","100026207","100026209","100026211","100026213","100026215","100026217","100026219","100026221","100026223","100026225","100026227","100026229","100026231","100026233","100026235","100026237","100026239","100026241","100026243","100026245","100026247","100026249","100026251","100026252","100026253","100026254","100026255","100026256","100026257","100026258","100026259","100026401","100026403","100026405","100026407","100026409","100026416","100026418","100026420","100026422","100026424","100026431","100026433","100026435","100026437","100026439","100026501","100026502","100026503","100026504","100026505","100026506","100026507","100026508","100026509","100026510","100031801","100031802","100031803","100031804","100031805","100031806","100031807","100031808","100031809","100031810","100031811","100031812","100031813","100031814","100031815","100031816","100031817","100031818","100031819","100031820","100031901","100031902","100031903","100031904","100031905"],discount618StartTime:1504663200,discount618EndTime:1505059199,sale520:["100023902","100022701","100027101","100029801","100027501","100027401","100026601","100023501","100029901","100030501","100030601","100030901","100028901","100029001","100029101","100022803","100023906"],nowActivity:{},isRetina:window.devicePixelRatio&&window.devicePixelRatio>1.2,isMobileTerminal:/iphone|android|ucweb|ucbrowser|nokia|sony|ericsson|mot|samsung|sgh|lg|philips|panasonic|alcatel|lenovo|cldc|midp|wap|mobile/i.test(navigator.userAgent.toLowerCase()),isMobile:/iphone|android|ucweb|ucbrowser|nokia|sony|ericsson|mot|samsung|sgh|lg|philips|panasonic|alcatel|lenovo|cldc|midp|wap|mobile/i.test(navigator.userAgent.toLowerCase())&&!/ipad/i.test(navigator.userAgent.toLowerCase()),isUC:/ucweb|ucbrowser/i.test(navigator.userAgent.toLowerCase()),csstransitions:Modernizr.csstransitions,csstransforms3d:Modernizr.csstransforms3d,opacity:Modernizr.opacity,recommendedProds:[],paging:{pageViewClass:"page-view",selectClass:"on",prevClass:"page-prev",prevWidth:97,nextClass:"page-next",nextWidth:97,lastClass:"page-last",lastWidth:50,firstClass:"page-first",firstWidth:51,itemWidth:51},captcha:{supportImei:"Captcha/imeishow",mobileCode:"Captcha/Show",singleWarranty:"Captcha/ImeiShow",tmallExchange:"captcha/recruitShow",addressCode:"Captcha/Show"},formatJSONToHash:function(e){var t=[];return $.each(e,function(e,o){null!=o&&void 0!==o&&t.push(e+"="+o)}),t.join("&")},formatUrlHash:function(e,t,o){var i=!1,e=e&&e.replace(/^[?|&]/,"")||"",a=e.split("&")||[],r={arrParams:[],jsonParams:{}};return $.each(a,function(e,a){var n=a.split("=");n.length>1&&(n[0]==t?(i=!0,r.arrParams.push({key:t,value:o})):r.arrParams.push({key:n[0],value:n[1]}),r.jsonParams[n[0]]=n[1])}),t&&o&&!i&&r.arrParams.push({key:t,value:o}),r},config:function(){var e=navigator.userAgent.toLowerCase(),t={layoutContainer:$(document),commonTempUrl:"base-template",pageUrl:"",ajaxUrl:"",errorMap:{},isIE:/msie/.test(e),isIE6:/msie 6/.test(e),isHackIE:/msie [7-8]/.test(e),isWebkit:/webkit/.test(e),isFirefox:/firefox/.test(e),isWindows:/windows/.test(e),isLinux:/linux/.test(e),isMac:/mac/.test(e)};return t.isNormalIE=t.isIE&&!t.isIE6&&!t.isHackIE,t}()});try{jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",easeOutQuart:function(e,t,o,i,a){return-i*((t=t/a-1)*t*t*t-1)+o}}),function(e,t,o){function i(){a=t[s](function(){r.each(function(){var t=e(this),o=t.width(),i=t.height(),a=e.data(this,l);o===a.w&&i===a.h||t.trigger(c,[a.w=o,a.h=i])}),i()},n[u])}var a,r=e([]),n=e.resize=e.extend(e.resize,{}),s="setTimeout",c="resize",l=c+"-special-event",u="delay",m="throttleWindow";n[u]=250,n[m]=!0,e.event.special[c]={setup:function(){if(!n[m]&&this[s])return!1;var t=e(this);r=r.add(t),e.data(this,l,{w:t.width(),h:t.height()}),1===r.length&&i()},teardown:function(){if(!n[m]&&this[s])return!1;var t=e(this);r=r.not(t),t.removeData(l),r.length||clearTimeout(a)},add:function(t){function i(t,i,r){var n=e(this),s=e.data(this,l);s.w=i!==o?i:n.width(),s.h=r!==o?r:n.height(),a.apply(this,arguments)}if(!n[m]&&this[s])return!1;var a;return e.isFunction(t)?(a=t,i):(a=t.handler,void(t.handler=i))}}}(jQuery,this),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,o=Number(arguments[1])||0;for(o=o<0?Math.ceil(o):Math.floor(o),o<0&&(o+=t);o<t;o++)if(o in this&&this[o]===e)return o;return-1})}catch(e){}appsServices.factory("StorageService",["$q",function(e){function t(){var e=this;e.canUsed=!!window.localStorage&&"object"==typeof JSON&&null!==JSON&&"function"==typeof JSON.parse&&"function"==typeof JSON.stringify}return t.prototype.init=function(){},t.prototype.get=function(e,t){var o=this,t=t||{},i=$.cookies.get(e,t);if(o.canUsed&&!t.useCookie){var a=decodeURIComponent(localStorage.getItem(e)),r="null"!==a?JSON.parse(a):i;return i&&(o.remove(e,t),o.set(e,r)),r}return i},t.prototype.set=function(e,t,o){var i=this,o=o||{};i.canUsed&&!o.useCookie?(i.remove(e),"string"!=typeof t&&(t=JSON.stringify(t)),localStorage.setItem(e,encodeURIComponent(t))):$.cookies.set(e,t,o)},t.prototype.filter=function(e,t){var o=this,t=t||{},i=$.cookies.filter(e,t);if(o.canUsed&&!t.useCookie){"string"==typeof e&&(e=new RegExp(e));for(var a in localStorage)a.match(e)&&(i[a]=o.get(a,t))}return i},t.prototype.remove=function(e,t){var o=this,t=t||{};o.canUsed&&localStorage.removeItem(e),$.cookies.del(e,t)},new t}]),appsServices.factory("CartReBuildService",["$q","$location","StoreConfig","Config","$rootScope","CartRequest","PhonesConfig","$cookies","$timeout","$filter","BaseInfo","Account","OrderService","MobileService","Utils",function(e,t,o,i,a,r,n,s,c,l,u,m,g,d,p){var f,h,v,b,y,w={},k={},C=null,S=!1,G=0,L=0,x=0,I=0,B=0,N=0,P={findCookies:function(){var e,t=s.getAll(),o=null,i=["ct","cw"],a={},r=[];if(_.size(t)>0)for(var n in i)if(o=new RegExp(i[n]+"\\d+","i"),angular.forEach(t,function(t,r){o.test(r)===!0&&("ct"===i[n]?(e=r.replace("ct",""),a[e]={sku:e,num:t}):"cw"===i[n]&&(e=r.replace("cw",""),a[e]||(a[e]={sku:e,num:1}),t&&(a[e].extra=t.split(":"))))}),_.size(a)>0){var c=s.get("cs");r=this.reformCookies(a,c)}return r},reformCookies:function(e,t){var o=[],i=[],a=null;if(t){o=t.split(",");for(var r in o)if(e[o[r]]){if(a={goods_code:e[o[r]].sku,count:e[o[r]].num,extra:[]},e[o[r]].extra)for(var n in e[o[r]].extra)a.extra.push({goods_code:e[o[r]].extra[n],count:1});i.push(a)}}else angular.forEach(e,function(e){if(a={goods_code:e.sku,count:e.num,extra:[]},e.extra)for(var t in e.extra)a.extra.push({goods_code:e.extra[t],
count:1});i.push(a)});return i},resolveSkus:function(e){var t=[],o=null;return e&&e instanceof Object&&(o=e,_.size(o)>0&&angular.forEach(o,function(e){t.push(e.goods_code.toString()),e.extra&&e.extra.length>0&&angular.forEach(e.extra,function(e){t.push(e.goods_code.toString())})})),t},getSkuDetail:function(t){var o=e.defer();return t.length>0?r.getSkusInfo({ids:t.join(","),with_stock:!0,with_spu:!0}).then(function(e){0===e.code?o.resolve(e.data.list):o.resolve([])}):o.resolve([]),o.promise},getDiscountList:function(){var t=e.defer();return f?t.resolve(f):r.getDiscountList({with_num:!0}).then(function(e){0===e.code?(f=e.data.list,t.resolve(f)):t.resolve([])}),t.promise},getWarrantySuks:function(e){for(var t,o,i=[],a=e instanceof Array?e:[],r=0;t=a.length,r<t;++r)if(o=n.phones[a[r]])for(var s=0;s<o.warranty.length;++s)_.indexOf(i,o.warranty[s])<0&&_.indexOf(a,o.warranty[s])<0&&i.push(o.warranty[s]);return i},setCache:function(t){var i,r,n,s,c,u,m=this,g=e.defer(),d=!1,p=P.resolveSkus(k),f=P.getWarrantySuks(p),h=p.concat(f),v=[];G=0,t&&t.length>0&&(h=h.concat(t));for(var b=0,i=h.length;b<i;++b)w[h[b]]||v.push(h[b]);return a.timestamp>=o.discount618StartTime&&a.timestamp<=o.discount618EndTime&&(d=!0),m.getSkuDetail(v).then(function(e){angular.forEach(e,function(e){if(w[e.id]={sku:e.id,limitNum:e.shop_info.limit_num||0,price:e.price,num:1,title:e.shop_info.title,subTitle:e.shop_info.sub_title,image:e.shop_info.ali_image?e.shop_info.ali_image:e.shop_info.image,isOSS:!!e.shop_info.ali_image,attrs:e.shop_info.spec_json,colorName:e.attr_info&&e.attr_info[1]&&e.attr_info[1].value||"",link:"#/item/"+e.id,isSold:3===e.sale_status,isMobile:e.product_info&&!!e.product_info.is_mobile,isPackage:e.product_info&&e.product_info.is_package,is618:d&&_.indexOf(o.discount906Skus,e.id.toString())>-1,isStock:e.in_stock,isInsurance:e.product_info&&e.product_info.is_insurance,stockNum:e.stock&&e.stock<=5&&e.stock||null,maxNum:e.stock?Math.min(e.shop_info.limit_num,e.stock):e.shop_info.limit_num},e.product_info&&e.product_info.goods_type>0)switch(r=e.product_info.goods_type.toString()){case"2":delete w[e.id].link,w[e.id].isInsurance=e.product_info.goods_type,w[e.id].postName="safety1",w[e.id].name="意外保修服务";break;case"4":delete w[e.id].link,w[e.id].isInsurance=e.product_info.goods_type,w[e.id].postName="safety2",w[e.id].name="延长保修服务";break;case"8":w[e.id].isDoodle=!0}if(w[e.id].isMobile){var t=[];if(e.spu.product_info.accessory_goods)for(var i in e.spu.product_info.accessory_goods)t.push(e.spu.product_info.accessory_goods[i]);w[e.id].warranty=l("orderBy")(t,["is_insurance"])}w[e.id].isPackage&&(w[e.id].packageGoods=e.product_info.package_goods,angular.forEach(w[e.id].packageGoods,function(e){e.title=e.shop_info.title,e.image=e.shop_info.ali_image?e.shop_info.ali_image:e.shop_info.image,e.isOSS=!!e.shop_info.ali_image,e.attrs=e.shop_info.spec_json,e.link="#/item/"+e.goods_code,e.isPackageGoods=!0}))}),angular.forEach(k,function(e){if(n=e.goods_code.toString(),w[n]){if(w[n].isSold&&w[n].isStock?(w[n].isChecked=void 0===w[n].isChecked||w[n].isChecked,w[n].isMobile&&angular.forEach(e.extra,function(t){c=t.goods_code.toString(),angular.forEach(w[n].warranty,function(t){u=t.goods_code.toString(),u==c&&(a.cartOrder.isEditCart?t.isChecked=!1:(t.isChecked=void 0===t.isChecked||t.isChecked,t._checked=void 0===t._checked||t._checked,t._delete=!t.isChecked),a.cartOrder.isEditCart&&!t.isChecked&&(G+=e.count))})}),w[n].isChecked||(G+=w[n].num),w[n]._checked=void 0===w[n]._checked||w[n]._checked):(w[n].isSold?w[n].stockMessage="已售罄":w[n].stockMessage="已下架",a.cartOrder.isEditCart||(w[n].isChecked=!1,w[n]._checked=!1)),!a.cartOrder.isEditCart||w[n].isSold&&w[n].isStock||w[n].isChecked||(G+=w[n].num),a.cartOrder.isEditCart||(w[n]._delete=!w[n].isChecked),w[n].isMobile){e.isMobile=!0;for(var t=0;t<w[n].warranty.length;++t)if(s=w[n].warranty[t].goods_code.toString(),w[s]){w[n].warrantyPrice=w[s].price;break}}w[n].isPackage&&(e.isPackage=!0),w[n].is618&&(e.is618=!0)}}),g.resolve(m.getCartData())}),g.promise},setCookie:function(e){var t=null,o=null,i=s.get("cs");if(e){var a="[object Object]"===Object.prototype.toString.apply(e)?[e]:e,r=[];t=new Date,t.setDate(t.getDate()+30);for(var n=0;n<a.length;++n)s.put("ct"+a[n].goods_code,a[n].count,{domain:".smartisan.com",path:"/",expires:t}),a[n].warranty&&s.put("cw"+a[n].goods_code,a[n].warranty,{domain:".smartisan.com",path:"/",expires:t}),!a[n].update&&r.push(a[n].goods_code);o=r.join(","),!e.update&&o&&(o=i?o+","+i:o,s.put("cs",o,{domain:".smartisan.com",path:"/",expires:t}))}},cleanCookie:function(){var e=$.cookies.filter("^ct|cw|cs");for(var t in e)s.remove(t,i.cookiesProperties)},getCartData:function(){var e=[],t=[];if(S){for(var o in k)e.push(k[o]);return this.reformCartData(e)}var i,a=s.get("cs"),r=a?a.split(","):[];if(r.length>0)for(var n=0;n<r.length;++n)k[r[n]]&&e.push(k[r[n]]);else{for(var o in k)e.push(k[o]),t.push(k[o].goods_code);_.size(k)>0&&(i=new Date,i.setDate(i.getDate()+30),s.put("cs",t.join(","),{domain:".smartisan.com",path:"/",expires:i}))}return this.reformCartData(e)},reformCartData:function(e){var t,o,i,a=S&&p.matchModules("shop"),r=null,n={},s={},c=[],u=[],m=[],g=[],d=[],f=[],k=[],_=1,C=1,$={totalSkuCount:1,totalPrice:0,goodsCount:0},P={totalPrice:0,goodsCount:0,goodsCheckedCount:0};if(h=[],v=[],b=[],y=[],L=0,N=0,I=0,B=0,x=0,angular.forEach(e,function(e){if(r=w[e.goods_code]){if(_=Math.min(r.limitNum,r.maxNum),C=e.count>_?_:e.count,r.isMobile&&r.isStock&&r.isSold&&r.warranty){angular.extend(r,{isAccident:!1,isDelay:!1});for(var t=0;t<r.warranty.length;++t)if(i=r.warranty[t].goods_code.toString(),w[i]){if(r.warranty[t]=angular.extend({},w[i],{isExist:!1,isChecked:r.warranty[t].isChecked,_checked:r.warranty[t]._checked,_delete:r.warranty[t]._delete,goods_code:r.warranty[t].goods_code}),r.warranty[t].attachId=e.goods_code,e.extra)for(var o=0;o<e.extra.length;++o)i==e.extra[o].goods_code&&(r.warranty[t].isExist=!0,r.warranty[t].num=e.count,$.goodsCount+=Number(e.count),$.totalPrice+=Number(r.warranty[t].price*e.count),P.goodsCount+=Number(e.count),r._checked&&(P.goodsCheckedCount+=Number(e.count),P.totalPrice+=Number(r.warranty[t].price*e.count)),angular.extend(r.warranty[t],{utime:e.extra[o].utime||null,ctime:e.extra[o].ctime||null}),2==r.warranty[t].isInsurance?r.isAccident=!0:4==r.warranty[t].isInsurance&&(r.isDelay=!0));angular.extend(r.warranty[t],{isWarranty:!0,mobileName:r.title,num:r.warranty[t].num,totalPrice:r.warranty[t].num*r.warranty[t].price})}}if(r.isPackage&&r.isStock&&r.isSold&&r.packageGoods)for(var t=0;t<r.packageGoods.length;++t)r.packageGoods[t].num=e.count;if(angular.extend(r,{num:C,totalPrice:C*r.price,utime:e.utime||null,ctime:e.ctime||null}),e.promotions||e.discount){if(r.promotions=angular.extend({},e.promotions),r.discount=angular.extend({},e.discount),r.promotions.gifts)for(var o=0;o<r.promotions.gifts.length;++o)w[r.promotions.gifts[o].sku]&&(r.promotions.gifts[o]=angular.extend({},{sku:r.promotions.gifts[o].sku,image:w[r.promotions.gifts[o].sku].image,isOSS:w[r.promotions.gifts[o].sku].isOSS,isDoodle:w[r.promotions.gifts[o].sku].isDoodle,isSold:w[r.promotions.gifts[o].sku].isSold,title:w[r.promotions.gifts[o].sku].title,price:w[r.promotions.gifts[o].sku].price,subTitle:w[r.promotions.gifts[o].sku].subTitle,link:w[r.promotions.gifts[o].sku].link,colorName:w[r.promotions.gifts[o].sku].colorName,num:r.promotions.gifts[o].num,maxGiftNum:r.promotions.gifts[o].maxGiftNum,isGift:!0,isStock:!(0==r.promotions.gifts[o].maxGiftNum)}));r.discount.hasDiscount&&(r.isStock&&r.isSold||(r.isChecked=!r.isChecked,r._checked=!r._checked,r._delete=!r._delete),angular.extend(r,{discountPrice:l("numberFormat")(r.discount.discountPrice,"floor",-2),hasDiscount:r.discount.hasDiscount,isStock:!0,isSold:!0}),null!=r.discount.discountNum&&(r.num>r.discount.discountNum&&(r.num=r.discount.discountNum),r.maxNum=r.discount.discountNum,r.stockNum=r.discount.discountNum),r.totalPrice=r.num*r.price,r.diffPrice=l("numberFormat")(r.totalPrice-r.discount.discountPrice*r.num,"floor",-2))}a&&(r.isSold&&r.isStock?e.groupId?s[e.groupId]?s[e.groupId].push(r):(s[e.groupId]=[],s[e.groupId].push(r)):r.isMobile?h.push({type:"2",typeName:"手机商品",list:[r],sortTime:r.ctime}):r.isPackage?k.push({type:"6",typeName:"套餐商品",list:[r],sortTime:r.ctime}):r.is618?(r.discountPrice=l("numberFormat")(.8*r.price,"floor",-2),r.diffPrice=l("numberFormat")(r.totalPrice-.8*r.price*r.num,"floor",-2),r.has618Discount=!0,r.discount={discountPrice:r.discountPrice},g.push(r)):m.push(r):f.push(r)),r.isSold&&(r.discount&&r.discount.hasDiscount?$.totalPrice+=Number(r.discountPrice*r.num):$.totalPrice+=Number(r.totalPrice),$.goodsCount+=Number(r.num)),$.totalSkuCount++,a&&(P.goodsCount+=Number(r.num),r._checked&&r.isSold&&r.isStock&&(P.goodsCheckedCount+=Number(r.num),r.is618&&r.has618Discount?(L+=Number(r.totalPrice),N+=Number(r.num),x+=Number(r.discountPrice*r.num)):r.hasDiscount?(I+=Number(r.totalPrice),B+=Number(r.discountPrice*r.num)):P.totalPrice+=Number(r.totalPrice))),r.isSold&&c.push(angular.extend({},r))}}),a){if(m.length>0&&(m=l("orderBy")(m,["-ctime"]),u.push({type:"4",typeName:"普通商品",list:m,sortTime:m.length>0&&m[0].ctime})),g.length>0){var A={tags:"T 恤特惠",hasDiscount:!1,description:"活动商品 “满 2 件 8 折”，",link:"http://www.smartisan.com/shop/#/category?id=69"};g=l("orderBy")(g,["-ctime"]),N>=2?(x=Number(l("numberFormat")(.8*L,"round",-2)),A.description="您已符合 “满 2 件 8 折” 活动条件",A.hasDiscount=!0):x=Number(L),y.push({type:"7",typeName:"618促销商品",list:g,discount618Promos:A,sortTime:g.length>0&&g[0].ctime})}f.length>0&&(f=l("orderBy")(f,["-isSold","-ctime"]),d.push({type:"8",typeName:"非卖品",list:f,sortTime:f.length>0&&f[0].ctime})),angular.forEach(s,function(e){for(var t,o={num:0,sortTime:0},i=[],a=0;a<e.length;++a){if(e[a].isMobile?(o.sortTime=o.isMobile?Math.max(o.sortTime,e[a].ctime):e[a].ctime,o.isMobile=!0):e[a].isPackage?(o.sortTime=e[a].ctime,o.isPackage=!0):o.sortTime=!o.isMobile&&(o.sortTime?Math.max(o.sortTime,e[a].ctime):e[a].ctime),o.num+=e[a]._checked&&Number(e[a].num),o.promotions=e[a].promotions,o.discount=e[a].discount,o.times=o.num<o.promotions.promoNum?0:Math.floor(o.num/o.promotions.promoNum),o.promotions&&o.promotions.gifts)for(var r=0;r<o.promotions.gifts.length;++r)o.promotions.gifts[r].maxGiftNum?o.times*o.promotions.gifts[r].num<=o.promotions.gifts[r].maxGiftNum?o.promotions.gifts[r].totalNum=o.times*o.promotions.gifts[r].num:o.promotions.gifts[r].totalNum=o.promotions.gifts[r].maxGiftNum:0==o.promotions.gifts[r].maxGiftNum?o.promotions.gifts[r].totalNum=0:o.promotions.gifts[r].totalNum=o.times*o.promotions.gifts[r].num;i.push(e[a])}i=o.isMobile?l("orderBy")(i,["isMobile","-ctime"]):l("orderBy")(i,["-ctime"]),t={list:i,sortTime:o.sortTime,times:o.times,promotions:o.promotions,discount:o.discount},o.isMobile?(t.type="1",t.typeName="手机促销商品",h.push(t)):o.isPackage?(t.type="5",t.typeName="套餐促销商品",b.push(t)):(t.type="3",t.typeName="普通促销商品",v.push(t))}),h=l("orderBy")(h,["-sortTime"]),v=l("orderBy")(v,["-sortTime"]),b=l("orderBy")(b,["-sortTime"]),o=h.concat(v).concat(u).concat(y).concat(b).concat(k),t=l("orderBy")(o.concat(d),["type","-ctime"]),n.order={goods:t,totalPrice:P.totalPrice+x+B,count:P.goodsCount,checkedCount:P.goodsCheckedCount,isInvalid:d.length>0,isNothing:0===o.length,hasChecked:o.length>0&&P.goodsCheckedCount>0,unCheckedNum:G,isCheckedAll:!G&&o.length>0,delCount:P.goodsCount-G,diffPrice:l("numberFormat")(L-x+(I-B),"floor",-2)}}return n.menu={goods:l("orderBy")(c,["-isStock","-ctime"]),totalPrice:$.totalPrice,count:$.goodsCount,skuCount:$.totalSkuCount},n},updateGoodsInCookies:function(e,t,o){var i=this,a=[],r=null,s=null;if("string"==typeof t||"number"==typeof t){s=t.toString();for(var c in e)if(e[c].goods_code===s){n.phones[s]||(e[c].count=Number(e[c].count)+o),r=angular.extend({},e[c],{update:!0});break}r||(r={count:o,goods_code:s},a.push(r),e=a.concat(e)),i.setCookie(r)}else if(angular.isArray(t)){var r,a=[],l=[],u=[];for(var m in t){r=null,t[m].warranty&&(l=t[m].warranty.split(":"),angular.forEach(l,function(e){u.push({goods_code:e,count:1})}));for(var g=0;g<e.length;++g)e[g].goods_code===t[m].sku&&(n.phones[t[m].sku]||(e[g].count=Number(e[g].count)+Number(t[m].num)),e[g].extra=u,r=angular.extend({},e[g],{update:!0,extra:u,warranty:t[m].warranty}),a.push(r));r||(r={count:t[m].num,goods_code:t[m].sku,extra:u,warranty:t[m].warranty},a.push(r),e=a.concat(e))}i.setCookie(a)}this.parseArrSyncData(e)},updateGoodsInCache:function(e,t,o){var i,a={isCanBuy:!0,tips:null,arrGoods:[]},r=[];if("string"==typeof e||"number"==typeof e)e=e.toString(),k[e]&&!o?(w[e]&&Number(k[e].count)+t>w[e].maxNum&&(a.isCanBuy=!1,a.tips="商品已达到最大可购买数量，无法继续添加"),i=a.isCanBuy?Number(k[e].count)+t:w[e].maxNum):i=t,a.isCanBuy&&(w[e]&&w[e].isMobile?(k[e].extra&&angular.forEach(k[e].extra,function(e){r.push({goods_code:e.goods_code,count:i,extra:[]})}),a.arrGoods.push({goods_code:e,count:i,extra:r})):a.arrGoods.push({goods_code:e,count:i,extra:[]}));else if(angular.isArray(e))for(var n,r=[],s=0;s<e.length;++s){if(k[e[s].sku]&&!o?(w[e[s].sku]&&Number(k[e[s].sku].count)+e[s].num>w[e[s].sku].maxNum&&(a.isCanBuy=!1,a.tips="商品已达到最大可购买数量，无法继续添加"),i=a.isCanBuy?Number(k[e[s].sku].count)+e[s].num:w[e[s].sku].maxNum):i=e[s].num,e[s].warranty)if(n=e[s].warranty.split(":"),k[e[s].sku]&&!o&&k[e[s].sku].extra)if(2==k[e[s].sku].extra.length)for(c in k[e[s].sku].extra)r.push({goods_code:k[e[s].sku].extra[c].goods_code,count:i,extra:[]});else if(2==n.length)for(var c in n)r.push({goods_code:n[c],count:i,extra:[]});else{var l=k[e[s].sku].extra[0].goods_code;l!=n[0]?(r.push({goods_code:l,count:i,extra:[]}),r.push({goods_code:n[0],count:i,extra:[]})):r.push({goods_code:l,count:i,extra:[]})}else for(var c in n)r.push({goods_code:n[c],count:1,extra:[]});else if(k[e[s].sku]&&!o&&k[e[s].sku].extra)for(c in k[e[s].sku].extra)r.push({goods_code:k[e[s].sku].extra[c].goods_code,count:k[e[s].sku].extra[c].count,extra:[]});a.isCanBuy&&a.arrGoods.push({goods_code:e[s].sku,count:i,extra:r})}return a},updatePromotionsGroup:function(){var e,t,o=[h,v,b];C=c(function(){for(var i=0;i<o.length;++i)angular.forEach(o[i],function(o){2!=o.type&&(e=0,angular.forEach(o.list,function(t){t._checked&&(e+=Number(t.num))}),t=e<o.promotions.promoNum?0:Math.floor(e/o.promotions.promoNum),angular.forEach(o.promotions.gifts,function(e){0===t?e.totalNum=0:null===e.maxGiftNum?e.totalNum=t*e.num:0==e.maxGiftNum?e.totalNum=0:e.totalNum=Math.min(e.maxGiftNum,t*e.num)}),o.times=t)})},50)},checkPromotions:function(){var t=e.defer(),o=null,i=null,a=[];return P.getDiscountList().then(function(e){if(e&&e.length>0)for(var r,n,s=null,c=null,l=0;l<e.length;++l)if(1==e[l].type){o=e[l].rule.condition.main_skus;for(var u=0;u<o.length;++u)if(s=o[u].toString(),k[s]){k[s].groupId=e[l].id,k[s].promotions={promoId:e[l].id,promoTag:e[l].tag,promoTitle:e[l].title,promoDesc:e[l].description,promoDesc_PC:e[l].note.desc_pc_1,noPromoDesc_PC:e[l].note.desc_pc_2+"，",noPromoLink_PC:e[l].note.add_on_pc_link,promoDesc_M:e[l].note.desc_mobile_1,noPromoDesc_M:e[l].note.desc_mobile_2+"，",noPromoLink_M:e[l].note.add_on_mobile_link,promoNum:e[l].rule.condition.num,promoType:e[l].type,gifts:[]};for(var m in e[l].rule.result.gift_skus)k[m]||_.indexOf(a,m)<0&&a.push(m),n=void 0!==e[l].gift_num[m]&&e[l].gift_num[m]>=0?e[l].gift_num[m]:null,k[s].promotions.gifts.push({sku:m,num:e[l].rule.result.gift_skus[m],maxGiftNum:n})}}else if(5==e[l].type){i=e[l].rule.result.discount_skus;for(var u=0;u<i.length;++u)c=i[u].sku_id.toString(),k[c]&&(k[c].groupId=e[l].id,r=!!(void 0===e[l].gift_num||e[l].gift_num&&(void 0==e[l].gift_num[c]||e[l].gift_num[c]>0)),n=void 0!==e[l].gift_num[c]&&e[l].gift_num[c]>=0?e[l].gift_num[c]:null,k[c].discount={hasDiscount:r,discountPrice:i[u].discount_price,discountNum:n})}t.resolve(a)}),t.promise},parseArrSyncData:function(e){k={};for(var t=0;t<e.length;++t)k[e[t].goods_code]=e[t]}},A={fetchCartList:function(t,o,i){var n=e.defer(),s=t&&angular.isArray(t)?t:a.isLoggedIn===!0?[]:P.findCookies(),c=o&&angular.isArray(o)?o.join(","):"",i=i&&angular.isArray(i)?i:[],l=null;return r.sync({list:angular.toJson(s),del:c}).then(function(e){S=!(0!==e.code&&!e.errInfo[20002]),l=S?e.data:s,P.parseArrSyncData(l),angular.forEach(i,function(e){angular.forEach(e.arrExtra,function(t){w[t]&&delete w[t],w[e.mainSku]&&angular.forEach(w[e.mainSku].warranty,function(e){e.goods_code==t&&(delete e.isChecked,delete e._checked,delete e._delete)})})}),S?P.checkPromotions().then(function(t){P.setCache(t).then(function(t){P.cleanCookie(),n.resolve({data:t,bomb:!(!e.errInfo||!e.errInfo[20002])})})}):p.matchModules("shop","cart")?location.replace("https://account.smartisan.com/#/v2/login?return_url="+encodeURIComponent(a.rootShopPath+"#/cart")):P.checkPromotions().then(function(e){P.setCache(e).then(function(e){n.resolve({data:e})})})}),n.promise},addCart:function(t,o,i,r){var n=e.defer(),o=o||1;if(a.isLoggedIn)if(a.cartMenu.skuCount>=50)n.reject("已达购物车最大容纳数量，无法继续添加");else{var s=P.updateGoodsInCache(t,o,i);s.isCanBuy&&s.arrGoods.length>0?this.fetch(s.arrGoods).then(function(e){!i&&n.resolve(e),i&&(C=c(function(){n.resolve(e)},60))}):n.reject(s.tips)}else{var n=e.defer(),l=P.findCookies(),u=!0;l.length>=30?n.reject("已达购物车最大容纳数量，无法继续添加"):(w[t]&&Number(w[t].num)+o>w[t].maxNum&&(u=!1,n.reject("商品已达到最大可购买数量，无法继续添加")),u&&(P.updateGoodsInCookies(l,t,o),"menu"===r?P.checkPromotions().then(function(e){P.setCache(e).then(function(e){n.resolve({data:e})})}):location.replace("https://account.smartisan.com/#/v2/login?return_url="+encodeURIComponent(a.rootShopPath+"#/cart"))))}return n.promise},singleDeleteCart:function(t,o,r){var n=e.defer(),l=o||null;if(a.isLoggedIn){var u=[],m=[],g=[];if(t)if(l)if(k[l]&&k[l].extra.length>0){for(var d=0;d<k[l].extra.length;++d)k[l].extra[d].goods_code!=t?u.push({goods_code:k[l].extra[d].goods_code,count:k[l].count,extra:[]}):g.push({mainSku:l,arrExtra:[t]});m.push({goods_code:l,count:k[l].count,extra:u}),this.fetch(m,null,g).then(function(e){n.resolve(e)})}else n.reject("The goods {sku} is no extra goods or warranties");else this.fetch(null,[t]).then(function(e){n.resolve(e)});else n.reject("The goods {sku} is empty")}else{var p,f,h,v,b="",y=s.get("cs");if(h=new Date,h.setDate(h.getDate()+30),l){if(b=s.get("cw"+l)){p=b.split(":");for(var d=0;d<p.length;++d)if(p[d]==t){p.splice(d,1);break}0===p.length?s.remove("cw"+l,i.cookiesProperties):s.put("cw"+l,p.join(":"),angular.extend({},i.cookiesProperties,{expires:h}))}}else if(r?(s.remove("ct"+t,i.cookiesProperties),s.remove("cw"+t,i.cookiesProperties)):s.remove("ct"+t,i.cookiesProperties),y){v=y.split(",");for(var _=0;_<v.length;++_)if(v[_]==t){v.splice(_,1);break}v.length>0?s.put("cs",v.join(","),angular.extend({},i.cookiesProperties,{expires:h})):s.remove("cs",i.cookiesProperties)}f=P.findCookies(),P.parseArrSyncData(f),P.setCache().then(function(e){n.resolve({data:e})})}return w[t]&&delete w[t],C&&c.cancel(C),n.promise},batchedDeleteCart:function(t){var o=e.defer(),i=a.cartOrder.goods,r=[];switch(t){case"isChecked":var n,s,l=[],u=[];angular.forEach(i,function(e){angular.forEach(e.list,function(e){if(e.isChecked)r.push(e.sku);else if(e.isMobile){s=[],n=[];for(var t=0;t<e.warranty.length;++t)e.warranty[t].isExist&&(e.warranty[t].isChecked?s.push(e.warranty[t].sku):n.push({goods_code:e.warranty[t].sku,count:e.warranty[t].num}));s.length>0&&u.push({mainSku:e.sku,arrExtra:s}),l.push({goods_code:e.sku,count:e.num,extra:n})}})}),this.fetch(l,r,u).then(function(e){o.resolve(e)});break;case"isInvalid":angular.forEach(i,function(e){8==e.type&&angular.forEach(e.list,function(e){r.push(e.sku)})}),this.fetch(null,r).then(function(e){o.resolve(e)});break;default:o.resolve({})}return C&&c.cancel(C),o.promise},toggleSingleGoodsChecked:function(e,t,o){o.num&&o.price&&(t?o._delete=e:(o._checked=e,o._delete=!e),o.isMobile&&angular.forEach(o.warranty,function(o){o.isExist&&(t||(o.isChecked=e,o._checked=e,o._delete=!e,e?(a.cartOrder.totalPrice+=o.num*o.price,a.cartOrder.checkedCount+=Number(o.num),a.cartOrder.unCheckedNum-=Number(o.num)):(a.cartOrder.totalPrice-=o.num*o.price,a.cartOrder.checkedCount-=Number(o.num),a.cartOrder.unCheckedNum+=Number(o.num))))}),o.promotions&&o.promotions.gifts&&P.updatePromotionsGroup(),t?e?(a.cartOrder.delCount+=Number(o.num),a.cartOrder.unCheckedNum-=Number(o.num)):(a.cartOrder.delCount-=Number(o.num),a.cartOrder.unCheckedNum+=Number(o.num)):(e?(o.hasDiscount?(a.cartOrder.diffPrice=Number(a.cartOrder.diffPrice)+Number(o.diffPrice),a.cartOrder.diffPrice=l("numberFormat")(a.cartOrder.diffPrice,"floor",-2),a.cartOrder.totalPrice+=o.num*o.discountPrice):a.cartOrder.totalPrice+=o.num*o.price,a.cartOrder.checkedCount+=Number(o.num),a.cartOrder.unCheckedNum-=Number(o.num)):(o.hasDiscount?(a.cartOrder.diffPrice=Number(a.cartOrder.diffPrice)-Number(o.diffPrice),a.cartOrder.diffPrice=l("numberFormat")(a.cartOrder.diffPrice,"floor",-2),a.cartOrder.totalPrice-=o.num*o.discountPrice):a.cartOrder.totalPrice-=o.num*o.price,a.cartOrder.checkedCount-=Number(o.num),a.cartOrder.unCheckedNum+=Number(o.num)),a.cartOrder.hasChecked=!!a.cartOrder.checkedCount)),a.cartOrder.isNothing||a.cartOrder.unCheckedNum?a.cartOrder.isCheckedAll=!1:a.cartOrder.isCheckedAll=!0},toggleAllGoodsChecked:function(e,t){for(var o=0,i=!1,r=0,n=0,s=0,c=0;o<a.cartOrder.goods.length;++o)angular.forEach(a.cartOrder.goods[o].list,function(o){o.isSold&&o.isStock&&(o.isChecked=e,o.isMobile&&angular.forEach(o.warranty,function(o){o.isExist&&(o.isChecked=e,t?o._delete=e:(o._checked=e,o._delete=!e),e?(r+=o.num*o.price,s+=Number(o.num)):c+=Number(o.num))}),t?o._delete=e:(o._checked=e,o._delete=!e),e?(o.hasDiscount?(r+=o.num*o.discountPrice,n+=Number(o.diffPrice)):r+=o.num*o.price,s+=Number(o.num)):c+=Number(o.num)),o.isSold&&o.isStock||(t?(o.isChecked=e,e?s+=Number(o.num):c+=Number(o.num)):(o.isChecked=!1,o._checked=!1,o._delete=!0)),i||o.promotions&&o.promotions.gifts&&(i=!0)});i&&P.updatePromotionsGroup(),t?(a.cartOrder.delCount=s,a.cartOrder.unCheckedNum=c):(a.cartOrder.totalPrice=r,a.cartOrder.diffPrice=l("numberFormat")(n,"floor",-2),a.cartOrder.checkedCount=s,a.cartOrder.unCheckedNum=c,a.cartOrder.hasChecked=e)},reverseCheckedState:function(e){var t=a.cartOrder.goods;a.cartOrder.delCount=0,a.cartOrder.unCheckedNum=0;for(var o=0;o<t.length;++o)angular.forEach(t[o].list,function(t){e?(t.isSold&&t.isStock?t.isChecked=t._delete:t.isChecked=!0,t.isChecked&&(a.cartOrder.delCount+=Number(t.num)),t.isChecked||(a.cartOrder.unCheckedNum+=Number(t.num))):(t.isSold&&t.isStock?t.isChecked=t._checked:t.isChecked=!1,!t.isChecked&&t.isSold&&t.isStock&&(a.cartOrder.unCheckedNum+=Number(t.num))),t.isMobile&&angular.forEach(t.warranty,function(t){t.isExist&&(e?(t.isChecked=!1,t.isChecked?a.cartOrder.delCount+=Number(t.num):a.cartOrder.unCheckedNum+=Number(t.num)):(t.isChecked=t._checked,t.isChecked||(a.cartOrder.unCheckedNum+=t.num)))})});a.cartOrder.isNothing||a.cartOrder.unCheckedNum?a.cartOrder.isCheckedAll=!1:a.cartOrder.isCheckedAll=!0},findWarrantiesByMobileSku:function(e){var t,o=[];return w[e]&&w[e].warranty&&(t=w[e].warranty,angular.forEach(t,function(e){o.push(angular.extend({},e))})),o},createOrder:function(){var e=[],t={goods_infos:[],carts:[],mobileGoods:[],suitGoods:[]};for(var o in k){var i=[];w[o]&&w[o].isSold&&w[o].isStock&&w[o].isChecked&&(k[o].isMobile?(angular.forEach(w[o].warranty,function(e){e.isExist&&i.push(e.sku)}),t.mobileGoods.push({id:o,num:w[o].num,warranty:i.join(":")})):k[o].isPackage?w[o].packageGoods&&(angular.forEach(w[o].packageGoods,function(e){i.push(e.goods_code+":"+e.num)}),e.push("0-"+o+":"+w[o].num+"|"+i.join("|"))):(t.carts.push({id:o,num:w[o].num}),t.goods_infos.push(o+":"+w[o].num)))}t.suitGoods=e.join(","),t.goods_infos=t.goods_infos.join(","),a.isMobile?location.href="http://m.store.smartisan.com/#/checkout?"+d.parseTempOrderParams(t,!0):a.isLoggedIn?g.createTempOrder(t).then(function(e){location.href="http://store.smartisan.com/#/checkout/"+e.id}):m.login()},reBindCart:function(e,t){e.menu&&("menu"===t?C=c(function(){a.cartMenu={list:e.menu.goods,totalPrice:e.menu.totalPrice,count:e.menu.count,skuCount:e.menu.skuCount,bubble:e.menu.count>=100?"…":e.menu.count}},700):a.cartMenu={list:e.menu.goods,totalPrice:e.menu.totalPrice,count:e.menu.count,skuCount:e.menu.skuCount,bubble:e.menu.count>=100?"…":e.menu.count}),e.order&&(a.cartOrder=angular.extend({},e.order,{isEmpty:0===e.order.goods.length,isEditCart:a.cartOrder.isEditCart}),C=c(function(){a.isMobile||a.cartOrder.isEmpty||!p.matchModules("shop","cart")||a.scrollFixCount()},0),a.cartOrder.isEmpty||(a.cartMenu.skuCount>=30&&a.cartMenu.skuCount<50?a.cartOrder.tips="购物车将达到容纳上限，请删除过期商品":a.cartMenu.skuCount>=50?a.cartOrder.tips="已达购物车最大容纳数量，无法继续添加":a.cartOrder.tips=null)),a.pageLoading=!1},cleanCart:function(){P.cleanCookie(),w={},k={},a.cartMenu={},a.cartOrder={},C&&c.cancel(C)}};return{fetch:A.fetchCartList,add:A.addCart,bind:A.reBindCart,singleDel:A.singleDeleteCart,batchedDel:A.batchedDeleteCart,clean:A.cleanCart,toggleChecked:A.toggleSingleGoodsChecked,toggleAllChecked:A.toggleAllGoodsChecked,reverseState:A.reverseCheckedState,findWarranties:A.findWarrantiesByMobileSku,buy:A.createOrder}}]),appsServices.factory("CartRequest",["$rootScope","$http","$q","$location","Config","Utils",function(e,t,o,i,a,r){var n,s=a.URI,c=/\{(\D+)\}/,l=navigator.userAgent.toLowerCase(),u=a.isProduction,m=/msie/.test(l)||/rv:11.0/.test(l),g="",d="",p=a.headconfig;m&&e.isMobile&&(d="&_="+(new Date).getTime());var f=function(e,i,a){var c,l=i?i:"store",u=a?p[a]:p.def;return function(i){var m=o.defer();return g=s[l],n=g+e+d,c=a&&"raw"===a?angular.toJson(i):r.toKeyValue(i),t.post(n,c,u).success(function(e){m.resolve(e)}).error(function(){m.reject("网络异常!")}),m.promise}},h=function(e,i){var a=e,l=c.exec(e),m=i?i:"midWare";return function(i){var c=o.defer();return l&&(a=e.replace(l[0],i[l[1]]),delete i[l[1]]),g=u?s[m]:s["__"+m],n=g+a+"?"+r.toKeyValue(i)+d,t.get(n).success(function(e){c.resolve(e)}).error(function(){c.reject("网络异常!")}),c.promise}};return{checkAccount:f("account/check","serv"),bargains:f("bargains/all","serv"),sync:f("sync","cart"),del:f("del","cart"),cdkeyGetInfo:f("Cdkey/GetInfo"),addressList:f("Address/GetList"),addressDelete:f("Address/Delete"),addressAdd:f("Address/Add"),addressUpdate:f("Address/Update"),moodOrder:f("mood/order","beike"),getReminder:f("Reserve/Info"),getPreSale:f("bargains/queueTip","serv"),cdkeyBind:f("Cdkey/bind"),redeemCodeExchange:f("RedeemCode/Exchange"),getBase:f("fudai/Lottery/Base","base"),getRandom:f("fudai/Lottery/LuckyDraw","base"),postRecord:f("fudai/Lottery/Record","base"),getProvince:f("Areas/Province","base"),getCity:f("Areas/City","base"),getDistrict:f("Areas/Area","base"),recruiting:f("recruit/create","base"),finderRecruiting:f("finder/create","base"),getAwardList:f("lottery/winlist"),lotteryDraw:f("lottery/draw"),getTimeStamp:f("get/curtime","quick"),buyCashCard:f("order/BuyCashCard"),getSkusInfo:h("skus"),getSingleSkuInfo:h("skus/{skuId}"),getFeatureList:h("featured"),getCategoryList:h("shop_categories"),getSpusList:h("spus"),getDiscountList:h("promotions"),getHome:h("home"),getStockList:h("stocks")}}]),appsServices.factory("GoodsService",["$q","$window","$location","CartRequest","MobileGoodsService","StoreConfig","$filter","Config","WarrantysService","$timeout",function(e,t,o,i,a,r,n,s,c,l){function u(){var e=this;e.goodsCache={},e.mobileSpus=a.getMobileSpus(),a.init()}return u.prototype.skuResolve=function(e,t,i){var a=this.mobileSpus,r="",n=o.$$search&&o.$$search.id||"";if(n){if(9!==n.length)location.replace("http://www.smartisan.com/#/error/404");else if(e&&7===e.length)if(n.indexOf(e)<0)location.replace("http://www.smartisan.com/#/error/404");else for(var s in a)if(_.indexOf(a[s],e)>=0)return"m1"==s||"m1l"===s?o.url("/buyphone?n="+s).replace():"jianguopro"==s?o.url("/jianguopro").replace():o.url("/"+s).replace()}else{if(e){if(r=e.substring(0,e.length-2),7!==r.length)return location.replace("http://www.smartisan.com/#/error/404");for(var s in a)if(_.indexOf(a[s],r)>=0)return"m1"==s||"m1l"===s?o.url("/buyphone?n="+s).replace():"jianguopro"==s?o.url("/jianguopro").replace():o.url("/"+s).replace();if(9===e.length)return i?void l(function(){o.url("/item/"+r+"?id="+e+"&anchor="+i).replace()}):void l(function(){o.url("/item/"+r+"?id="+e).replace()})}location.replace("http://www.smartisan.com/#/error/404")}},u.prototype.parseCommonData=function(e){var t=this,o=angular.isArray(e),e=o?e:[e],i=a.mapPhones,l=c.mapWarrantys,u=a.mapCovers,m=[];return $.each(e,function(e,o){if(o){var a=10;o.in_stock&&o.stock&&o.shop_info?a=Math.min(o.stock,o.shop_info.limit_num):o.in_stock&&o.stock?a=o.in_stock&&o.stock:o.shop_info&&(a=o.shop_info.limit_num);var g={id:o.sku||o.goods_code||o.id||o.product_info.goods_code,sku:o.sku||o.goods_code||o.id||o.product_info.goods_code,name:o.shop_info&&o.shop_info.title||o.goods_name||o.name||"",cartName:o.product_info&&o.product_info.goods_name||o.name||"",subName:o.shop_info&&o.shop_info.sub_title||o.subname||"",image:o.shop_info&&o.shop_info.image||o.image||"",max:a,price:o.price||o.sell_price,link:null,isGift:!1,isSell:0,isOut:0,isMobile:0,isWarranty:0,isNormal:0,isCustom:0,isDiscount:0};if(angular.isObject(o.attr_info)){var d=[];angular.forEach(o.attr_info,function(e,t){d.push(e.value),1==e.spec_id&&(g.attrSummary="（"+e.value+"）")}),g.attrString=d.join("、")}else g.attrString="",g.attrSummary="";if(g.attrSummary?g.nameAttr=g.name+g.attrSummary:g.nameAttr=g.name,i[g.sku]){g=$.extend(g,i[g.sku],{image:g.image,price:g.price,max:1,isSell:12==o.status||1==o.status||3==o.sale_status,isMobile:1,link:"#/item/"+g.sku});var p=c.getWarrantysWithCategory(g.category);$.each(p,function(e,o){t.goodsCache[o.sku]&&(o=angular.extend(o,t.goodsCache[o.sku])),"safety1"==o.postName&&(g.accident=t.parseCommonData(o),g.accident.mobile=g.sku),"safety2"==o.postName&&(g.delay=t.parseCommonData(o),g.delay.mobile=g.sku)}),11==o.status||12==o.status?g.isOut=11==o.status?0:!o.store_status:o.status?g.isOut=0===Math.max(o.store_nums,0):g.isOut=!o.in_stock}else l[g.sku]?(g=$.extend(g,l[g.sku],{isSell:1,isWarranty:1},g.image?{image:g.image}:{}),o.price&&g.price!=o.price&&(g.price=o.price)):g=$.extend(g,{link:"#/item/"+g.sku,image:g.image,isSell:12==o.status||1==o.status||3==o.sale_status,isOut:o.store_nums&&0===Math.max(o.store_nums,0)||!o.in_stock,isNormal:1,isCustom:o.is_custom||o.shop_info&&o.shop_info.is_custom||0,isDiscount:r.useGoodsDiscount&&u[g.sku]&&"t2"!=u[g.sku].category});g.image.indexOf(g.sku)!=-1&&g.image.indexOf("smartisanos.cn")==-1&&(g.image=s.imgUrl+n("realImage")(g.image,80)),t.goodsCache[g.sku]=$.extend({},g),m.push(g)}}),o?m:m[0]},u.prototype.getSimpleDetail=function(t,o){var i=this,r=angular.isArray(t)?t:(t+"").split(","),n=(a.mapPhones,c.mapWarrantys,[]),s={};if($.each(r,function(e,t){i.goodsCache[t]?s[t]=$.extend({},i.goodsCache[t]):n.push(t)}),n.length)return e.all({goodsResponse:i.fetchGoodsDetail(n,o)}).then(function(t){var o=e.defer(),i=t.goodsResponse,a=angular.isArray(i)?i[0]:i;return n.length&&$.each(n,function(e,t){!!a[t]&&(s[t]=a[t])}),o.resolve(s),o.promise});var l=e.defer();return l.resolve(s),l.promise},u.prototype.fetchGoodsDetail=function(t,o){var r=this,n=angular.isArray(t)?t:(t+"").split(","),s=a.mapPhones,l=c.mapWarrantys,u=(a.mapCovers,[]),m={};$.each(n,function(e,t){r.goodsCache[t]?m[t]=$.extend({},r.goodsCache[t]):u.push(t)});var g=[];if($.each(u,function(e,t){var o,i=s[t];angular.isObject(i)&&_.findIndex(g,{categoryShort:i.category})==-1&&(o=c.getWarrantysWithCategory(i.category),g=g.concat(o))}),g=_.pluck(g,"sku"),u=g.concat(u),u.length)return i.getSkusInfo({ids:u.join(","),with_spu:!0,with_stock:!0}).then(function(t){var o=[],i=e.defer();if(t.code)i.reject("网络异常!");else{o=t.data;var a=[],n=[];$.each(o.list,function(e,t){l[t.id]?a.push(t):n.push(t)}),o.list=a.concat(n),$.each(o.list,function(e,t){var o=r.parseCommonData(t);m[o.sku]=$.extend({},o)}),i.resolve(m)}return i.promise},function(e){});var d=e.defer();return d.resolve(m),d.promise},u.prototype.getWarrantyDetail=function(e){
var t=this,o=c.mapWarrantys[e],i=t.parseCommonData(o);return $.extend({},i)},u.prototype.fetchPromotionBrief=function(){return i.getDiscountList({with_num:!0}).then(function(t){var o,i,a,r,n,s,c=e.defer(),l=null;return t.code?c.reject("网络错误"):(o=t.data,l={give:{},discount:{}},angular.forEach(o.list,function(e){1==e.type&&angular.forEach(e.rule.condition.main_skus,function(t){n=t.toString(),l.give[n]={type:1,tag:e.tag,title:e.title,description:e.description,note:e.note,gifts:{}},angular.forEach(e.rule.result.gift_skus,function(t,o){s=o.toString(),i=!!(void 0===e.gift_num||e.gift_num&&(void 0===e.gift_num[s]||e.gift_num[s]>0)),l.give[n].gifts[s]={stock:i}})}),5==e.type&&angular.forEach(e.rule.result.discount_skus,function(t){r=null,a=!0,void 0!=e.gift_num&&void 0!=e.gift_num[t.sku_id]&&(e.gift_num[t.sku_id]>0?(a=!0,r=e.gift_num[t.sku_id]):a=!1),a&&(l.discount[t.sku_id]={discountPrice:t.discount_price,maxNum:r,type:5,tag:e.tag,title:e.title,description:e.description,note:e.note})})}),c.resolve(l)),c.promise},function(e){})},u.prototype.fetchPromotionGiftInfo=function(){var t=this;return t.fetchPromotionBrief().then(function(o){return t.getSimpleDetail(o.allGiftSkus,!0).then(function(t){var i=e.defer();return o.allGiftSkusInfo=t,i.resolve(o),i.promise},function(e){})},function(e){})},u.prototype.getSkuListWithStock=function(t){var o=e.defer();return t instanceof Array&&t.length>0?i.getSkusInfo({ids:t.join(","),with_stock:!0}).then(function(e){0===e.code&&e.data.list.length>0&&o.resolve(e.data)}):o.reject("ids 数据异常"),o.promise},new u}]),appsServices.factory("MobileService",["$q","StorageService","StoreConfig","MobileGoodsService","CartRequest","WarrantysService",function(e,t,o,i,a,r){function n(){var e=this;e.type={},e.UserService=null,e.MobileGoodsService=null,e.StorageService=null}return n.prototype.createTempOrder=function(o){var i=e.defer(),a=this,r="o"+(new Date).getTime(),n={id:r,mobile_id:o.mobileId,discount_amount:o.discountAmount||0};return a.removeCache(function(){t.set(r,n,{useCookie:!0,domain:".smartisan.com"})}),i.resolve({id:r}),i.promise},n.prototype.completeTempOrder=function(o){var i=this,a=$.extend({mobileGoods:[o.mobile_id]},o);a.id=a.id||"o"+(new Date).getTime(),o.safety1&&a.mobileGoods.push(o.safety1),o.safety2&&a.mobileGoods.push(o.safety2),delete o.mobile_id,delete o.safety1,delete o.safety2,a.mobileGoods.push(1),a.mobileGoods=a.mobileGoods.join(":"),i.removeCache(function(){t.set(a.id,a,{useCookie:!0,domain:".smartisan.com"})});var r=e.defer();return r.resolve(a),r.promise},n.prototype.removeCache=function(e){var o=t.filter("^o"),i=new Date;i.setTime(i.getTime()-1),$.each(o,function(e,o){t.remove(e,{domain:".smartisan.com",expires:i})}),"function"==typeof e&&e()},n.prototype.parseTempOrderParams=function(e,t){var i=this,a={};if(e.cdkey_code&&(a.c=e.cdkey_code),e.discount_amount&&(a.d=e.discount_amount),e.goods_infos&&(a.g=e.goods_infos),e.suitGoods&&(a.sg=e.suitGoods),t){var r=e.mobileGoods||[],n=[];if(e.mobile_id){var s=[];s.push(e.mobile_id),e.safety1&&s.push(e.safety1),e.safety2&&s.push(e.safety2),s.push(1),n.push(s.join(":"))}$.each(r,function(e,t){var o=[t.id];!!t.warranty&&o.push(t.warranty),o.push(t.num),n.push(o.join(":"))}),n.length&&(a.mg=n.join(","))}else e.mobile_id&&(a.m=e.mobile_id),e.safety1&&(a.w1=e.safety1),e.safety2&&(a.w2=e.safety2),e.fitting&&(a.fitting=e.fitting);return i.removeCache(function(){}),o.formatJSONToHash(a)},n.prototype.parseOrderViewData=function(e){var t={total:0,amountTotal:0},o=[],a=[],n=[];return e.m&&(t.isMobileOrder=!0,t.mobileData=i.mapPhones[e.m],o.push(t.mobileData),t.total+=parseInt(t.mobileData.price)),e.c&&(t.cdkey_code=e.c),t.discount_amount=e.d||0,t.discount_amount>t.total&&(t.discount_amount=0),e.w1&&(t.isMobileOrder=!0,t.safety1=e.w1,a.push(r.mapWarrantys[e.w1]),t.total+=r.mapWarrantys[e.w1].price),e.w2&&(t.isMobileOrder=!0,t.safety2=e.w2,a.push(r.mapWarrantys[e.w2]),t.total+=r.mapWarrantys[e.w2].price),t.mobiles=o,t.warrantys=a,e.fitting&&(t.fitting=e.fitting),e.g&&(t.goods_infos=e.g),e.ac&&(n=e.ac.split("|")),t.acList=n,t.amountTotal=t.total-t.discount_amount,t},n.prototype.verifyMobileCdkey=function(t){return a.cdkeyGetInfo(t).then(function(t){var o=e.defer();return o.resolve(t),o.promise},function(e){return!1})},n.prototype.RedeemCodeExchange=function(t){return a.redeemCodeExchange(t).then(function(t){var o=e.defer();return o.resolve(t),o.promise},function(e){return!1})},new n}]),appsServices.factory("MobileGoodsService",["CartRequest","$q","Config","$filter","Utils","StorageService",function(e,t,o,i,a,r){function n(){var e=this;e.mapMobileGifts={},e.mapPhones={},e.mapCovers={},e.mapHeadset={},e.mapNormalT1={},e.mapDefectT1={},e.mapNormalT2={},e.mapNormalNuts={},e.mapYoungNuts={},e.mapBlackNuts={},e.mapDefectNuts={},e.mapNormalM1={},e.mapNormalM1L={},e.mapSeniorM1L={},e.mapStock={},e.listNormalT1=[],e.listDefectT1=[],e.listNormalT2=[],e.listNormalNuts=[],e.listYoungNuts=[],e.listBlackNuts=[],e.listDefectNuts=[],e.listCoversNuts=[],e.listCoversT2=[],e.listHeadset=[]}var s=["100000001","100000002","100000201","100000202","100007201","100007001","100007002","100007003","100007004","100007005","100007006"];return n.prototype.init=function(){var e=this;e.formatMobileData(),e.formatCoverData(),e.formatHeadsetData(),e.mapColor=e.modelColor(),e.mapColorT1=e.mapColor.t1,e.mapColorNuts=e.mapColor.nuts},n.prototype.formatMobileData=function(e){var t=this,e=e||{},o=e.t1||t.t1(),i=e.t2||t.t2(),a=e.nuts||t.nuts(),r=e.m1||t.m1(),n=e.m1l||t.m1l(),s=t.modelColor(),c={},l={},u={},m={},g={};c=t.parsePhones(o,s.t1),l=t.parsePhones(i,s.t2),u=t.parsePhones(a,s.nuts),m=t.parsePhones(r,s.m1),g=t.parsePhones(n,s.m1l),t.mapNormalT1=c.mapNormal,t.mapDefectT1=c.mapDefect,t.listNormalT1=c.listNormal,t.listDefectT1=c.listDefect,t.mapNormalT2=l.mapNormal,t.listNormalT2=l.listNormal,t.mapNormalNuts=u.mapNormal,t.mapYoungNuts=u.mapYoung,t.mapBlackNuts=u.mapBlack,t.mapDefectNuts=u.mapDefect,t.listNormalNuts=u.listNormal,t.listYoungNuts=u.listYoung,t.listBlackNuts=u.listBlack,t.listDefectNuts=u.listDefect,t.mapNormalM1=m.mapNormal,t.mapNormalM1L=g.mapNormal,t.mapSeniorM1L=g.mapSenior},n.prototype.getAllMobilesStock=function(a){var r=this,n=a||[].concat(s).join(","),c=!0,l=n.split(",");if($.each(l,function(e,t){if(void 0==r.mapStock[t])return c=!1,!1}),c){var u=t.defer();return u.resolve(r.mapStock),u.promise}return e.getSkusInfo({ids:n,with_spu:!0,with_stock:!0}).then(function(e){var a,n=t.defer(),s=(r.t1(),{});return e.code?n.reject("网络延迟"):(a=e.data,$.each(a.list,function(e,t){s[t.id]={stock:t.in_stock,price:t.price,image:t.shop_info&&t.shop_info.image||t.image||""},s[t.id].image.indexOf(t.id)!=-1&&s[t.id].image.indexOf("smartisan")==-1&&(s[t.id].image=o.imgUrl+i("realImage")(s[t.id].image,80))}),r.mapStock=$.extend(r.mapStock,s),n.resolve(s)),n.promise},function(e){return!1})},n.prototype.t1=function(){return[{category:"t1",version:"normal",isSale:!1,sku:"100000001",presaleAmount:300,name:"Smartisan T1 3G版 黑色 16GB",color:"black",standard:"3G",capacity:"16GB",price:1980,countdown:86400},{category:"t1",version:"normal",isSale:!1,sku:"100000002",presaleAmount:300,name:"Smartisan T1 3G版 黑色 32GB",color:"black",standard:"3G",capacity:"32GB",price:2080,countdown:86400},{category:"t1",version:"normal",isSale:!0,sku:"100000201",presaleAmount:300,name:"Smartisan T1 4G版 黑色 32GB",color:"black",standard:"4G",capacity:"32GB",price:2480,countdown:86400},{category:"t1",version:"normal",isSale:!0,sku:"100000202",presaleAmount:300,name:"Smartisan T1 4G版 白色 32GB",color:"white",standard:"4G",capacity:"32GB",price:2480,countdown:86400},{category:"t1",version:"normal",isSale:!0,sku:"100007201",presaleAmount:300,name:"Smartisan T1 一周年纪念版 黑色 32GB",color:"anniversary",standard:"4G",capacity:"32GB",price:2480,countdown:86400},{category:"t1",version:"normal",isSale:!1,sku:"100010501",presaleAmount:300,name:"Smartisan T1 4G 移动套餐版 黑色 32GB",color:"black",standard:"4G",capacity:"32GB",price:2480,countdown:86400},{category:"t1",version:"normal",isSale:!1,sku:"100010502",presaleAmount:300,name:"Smartisan T1 4G 移动套餐版 白色 32GB",color:"white",standard:"4G",capacity:"32GB",price:2480,countdown:86400},{category:"t1",version:"defect",isSale:!0,sku:"100007001",presaleAmount:300,defect:!0,defectDiscount:300,name:"Smartisan T1 官方翻新机 B级 3G版 黑色 32GB",color:"black",standard:"3G",capacity:"32GB",price:1780,countdown:86400},{category:"t1",version:"defect",isSale:!0,sku:"100007002",presaleAmount:300,defect:!1,defectDiscount:100,name:"Smartisan T1 官方翻新机 A级 3G版 黑色 32GB",color:"black",standard:"3G",capacity:"32GB",price:1980,countdown:86400},{category:"t1",version:"defect",isSale:!0,sku:"100007003",presaleAmount:300,defect:!0,defectDiscount:300,name:"Smartisan T1 官方翻新机 B级 4G版 黑色 32GB",color:"black",standard:"4G",capacity:"32GB",price:2180,countdown:86400},{category:"t1",version:"defect",isSale:!0,sku:"100007004",presaleAmount:300,defect:!1,defectDiscount:100,name:"Smartisan T1 官方翻新机 A级 4G版 黑色 32GB",color:"black",standard:"4G",capacity:"32GB",price:2380,countdown:86400},{category:"t1",version:"defect",isSale:!0,sku:"100007005",presaleAmount:300,defect:!0,defectDiscount:300,name:"Smartisan T1 官方翻新机 B级 3G版 黑色 16GB",color:"black",standard:"3G",capacity:"16GB",price:1680,countdown:86400},{category:"t1",version:"defect",isSale:!0,sku:"100007006",presaleAmount:300,defect:!1,defectDiscount:100,name:"Smartisan T1 官方翻新机 A级 3G版 黑色 16GB",color:"black",standard:"3G",capacity:"16GB",price:1880,countdown:86400}]},n.prototype.t2=function(){var e=[{category:"t2",version:"normal",edition:"netcom",edtionLabel:"全网通",isSale:!0,sku:"100014501",name:"Smartisan T2（黑色，32GB）",color:"black",standard:"4G",capacity:"32GB",oldPrice:2599,price:2599,countdown:86400},{category:"t2",version:"normal",edition:"netcom",edtionLabel:"全网通",isSale:!0,sku:"100014502",name:"Smartisan T2（黑色，16GB）",color:"black",standard:"4G",capacity:"16GB",oldPrice:2499,price:2499,countdown:86400}];return e},n.prototype.nuts=function(){return[{category:"nuts",version:"normal",versionLabel:"标准版",edition:"netcom",edtionLabel:"全网通",isSale:!0,sku:"100015803",presaleAmount:300,name:"坚果手机（灰色，32GB，全网通）",color:"gray",standard:"4G",capacity:"32GB",oldPrice:899,price:899,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"netcom",edtionLabel:"全网通",isSale:!0,sku:"100015804",presaleAmount:300,name:"坚果手机（灰色，16GB，全网通）",color:"gray",standard:"4G",capacity:"16GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007303",presaleAmount:300,name:"坚果手机（绿色，32GB）",color:"green",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007304",presaleAmount:300,name:"坚果手机（绿色，16GB）",color:"green",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007305",presaleAmount:300,name:"坚果手机（黄色，32GB）",color:"yellow",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007306",presaleAmount:300,name:"坚果手机（黄色，16GB）",color:"yellow",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007307",presaleAmount:300,name:"坚果手机（橙色，32GB）",color:"orange",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007308",presaleAmount:300,name:"坚果手机（橙色，16GB）",color:"orange",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007309",presaleAmount:300,name:"坚果手机（紫色，32GB）",color:"purple",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007310",presaleAmount:300,name:"坚果手机（紫色，16GB）",color:"purple",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007311",presaleAmount:300,name:"坚果手机（红色，32GB）",color:"red",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007312",presaleAmount:300,name:"坚果手机（红色，16GB）",color:"red",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007313",presaleAmount:300,name:"坚果手机（蓝色，32GB）",color:"blue",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007314",presaleAmount:300,name:"坚果手机（蓝色，16GB）",color:"blue",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007317",presaleAmount:300,name:"坚果手机（青色，32GB）",color:"light-blue",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007318",presaleAmount:300,name:"坚果手机（青色，16GB）",color:"light-blue",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007319",presaleAmount:300,name:"坚果手机（灰色，32GB）",color:"gray",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007320",presaleAmount:300,name:"坚果手机（灰色，16GB）",color:"gray",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012905",presaleAmount:300,name:"坚果手机（绿色，32GB，移动定制）",color:"green",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012906",presaleAmount:300,name:"坚果手机（绿色，16GB，移动定制）",color:"green",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012907",presaleAmount:300,name:"坚果手机（黄色，32GB，移动定制）",color:"yellow",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012908",presaleAmount:300,name:"坚果手机（黄色，16GB，移动定制）",color:"yellow",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012909",presaleAmount:300,name:"坚果手机（橙色，32GB，移动定制）",color:"orange",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012910",presaleAmount:300,name:"坚果手机（橙色，16GB，移动定制）",color:"orange",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012911",presaleAmount:300,name:"坚果手机（紫色，32GB，移动定制）",color:"purple",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012912",presaleAmount:300,name:"坚果手机（紫色，16GB，移动定制）",color:"purple",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012913",presaleAmount:300,name:"坚果手机（红色，32GB，移动定制）",color:"red",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012914",presaleAmount:300,name:"坚果手机（红色，16GB，移动定制）",color:"red",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012915",presaleAmount:300,name:"坚果手机（蓝色，32GB，移动定制）",color:"blue",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012916",presaleAmount:300,name:"坚果手机（蓝色，16GB，移动定制）",color:"blue",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012903",presaleAmount:300,name:"坚果手机（青色，32GB，移动定制）",color:"light-blue",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012904",presaleAmount:300,name:"坚果手机（青色，16GB，移动定制）",color:"light-blue",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012901",presaleAmount:300,name:"坚果手机（灰色，32GB，移动定制）",color:"gray",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012902",presaleAmount:300,name:"坚果手机（灰色，16GB，移动定制）",color:"gray",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013005",presaleAmount:300,name:"坚果手机（绿色，32GB，电信定制）",color:"green",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013006",presaleAmount:300,name:"坚果手机（绿色，16GB，电信定制）",color:"green",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013007",presaleAmount:300,name:"坚果手机（黄色，32GB，电信定制）",color:"yellow",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013008",presaleAmount:300,name:"坚果手机（黄色，16GB，电信定制）",color:"yellow",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013009",presaleAmount:300,name:"坚果手机（橙色，32GB，电信定制）",color:"orange",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013010",presaleAmount:300,name:"坚果手机（橙色，16GB，电信定制）",color:"orange",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013011",presaleAmount:300,name:"坚果手机（紫色，32GB，电信定制）",color:"purple",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013012",presaleAmount:300,name:"坚果手机（紫色，16GB，电信定制）",color:"purple",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013013",presaleAmount:300,name:"坚果手机（红色，32GB，电信定制）",color:"red",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013014",presaleAmount:300,name:"坚果手机（红色，16GB，电信定制）",color:"red",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013015",presaleAmount:300,name:"坚果手机（蓝色，32GB，电信定制）",color:"blue",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013016",presaleAmount:300,name:"坚果手机（蓝色，16GB，电信定制）",color:"blue",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013003",presaleAmount:300,name:"坚果手机（青色，32GB，电信定制）",color:"light-blue",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013004",presaleAmount:300,name:"坚果手机（青色，16GB，电信定制）",color:"light-blue",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013001",presaleAmount:300,name:"坚果手机（灰色，32GB，电信定制）",color:"gray",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013002",presaleAmount:300,name:"坚果手机（灰色，16GB，电信定制）",color:"gray",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"black",versionLabel:"黑色版",edition:"netcom",edtionLabel:"全网通",isSale:!0,sku:"100015801",presaleAmount:300,name:"坚果手机（黑色，32GB，全网通）",color:"black",standard:"4G",capacity:"32GB",oldPrice:899,price:899,countdown:3600},{category:"nuts",version:"black",versionLabel:"黑色版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007315",presaleAmount:300,name:"坚果手机（黑色，32GB）",color:"black",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"black",versionLabel:"黑色版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007316",presaleAmount:300,name:"坚果手机（黑色，16GB）",color:"black",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"black",versionLabel:"黑色版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012917",presaleAmount:300,name:"坚果手机（黑色，32GB，移动定制）",color:"black",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"black",versionLabel:"黑色版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012918",presaleAmount:300,name:"坚果手机（黑色，16GB，移动定制）",color:"black",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"black",versionLabel:"黑色版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013017",presaleAmount:300,name:"坚果手机（黑色，32GB，电信定制）",color:"black",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"black",versionLabel:"黑色版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013018",presaleAmount:300,name:"坚果手机（黑色，16GB，电信定制）",color:"black",standard:"4G",capacity:"16GB",oldPrice:699,price:699,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"netcom",edtionLabel:"全网通",isSale:!0,sku:"100015901",presaleAmount:300,name:"坚果手机文艺青年版（远州鼠，32GB，全网通）",color:"bone",standard:"4G",capacity:"32GB",oldPrice:899,price:899,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100013101",presaleAmount:300,name:"坚果手机文艺青年版（鸠羽紫，32GB）",color:"violet",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100013102",presaleAmount:300,name:"坚果手机文艺青年版（苏芳，32GB）",color:"rose",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100013103",presaleAmount:300,name:"坚果手机文艺青年版（落栗，32GB）",color:"coffee",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100013104",presaleAmount:300,name:"坚果手机文艺青年版（柳煤竹茶，32GB）",color:"olive",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100013105",presaleAmount:300,name:"坚果手机文艺青年版（枯草，32GB）",color:"sand",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100013106",presaleAmount:300,name:"坚果手机文艺青年版（石竹，32GB）",color:"pink",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100013107",presaleAmount:300,name:"坚果手机文艺青年版（远州鼠，32GB）",color:"bone",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100013108",presaleAmount:300,name:"坚果手机文艺青年版（锖青磁，32GB）",color:"grass",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100013201",presaleAmount:300,name:"坚果手机文艺青年版（鸠羽紫，32GB，移动定制）",color:"violet",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100013202",presaleAmount:300,name:"坚果手机文艺青年版（苏芳，32GB，移动定制）",color:"rose",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100013203",presaleAmount:300,name:"坚果手机文艺青年版（落栗，32GB，移动定制）",color:"coffee",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100013204",presaleAmount:300,name:"坚果手机文艺青年版（柳煤竹茶，32GB，移动定制）",color:"olive",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100013205",presaleAmount:300,name:"坚果手机文艺青年版（枯草，32GB，移动定制）",color:"sand",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100013206",presaleAmount:300,name:"坚果手机文艺青年版（石竹，32GB，移动定制）",color:"pink",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100013207",presaleAmount:300,name:"坚果手机文艺青年版（远州鼠，32GB，移动定制）",color:"bone",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100013208",presaleAmount:300,name:"坚果手机文艺青年版（锖青磁，32GB，移动定制）",color:"grass",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013301",presaleAmount:300,name:"坚果手机文艺青年版（鸠羽紫，32GB，电信定制）",color:"violet",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013302",presaleAmount:300,name:"坚果手机文艺青年版（苏芳，32GB，电信定制）",color:"rose",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013303",presaleAmount:300,name:"坚果手机文艺青年版（落栗，32GB，电信定制）",color:"coffee",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013304",presaleAmount:300,name:"坚果手机文艺青年版（柳煤竹茶，32GB，电信定制）",color:"olive",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013305",presaleAmount:300,name:"坚果手机文艺青年版（枯草，32GB，电信定制）",color:"sand",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013306",presaleAmount:300,name:"坚果手机文艺青年版（石竹，32GB，电信定制）",color:"pink",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013307",presaleAmount:300,name:"坚果手机文艺青年版（远州鼠，32GB，电信定制）",color:"bone",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013308",presaleAmount:300,name:"坚果手机文艺青年版（锖青磁，32GB，电信定制）",color:"grass",standard:"4G",capacity:"32GB",oldPrice:799,price:799,countdown:3600}]},n.prototype.m1=function(){var e=[{sku:"100021201",category:"m1",inch:"5.15",name:"Smartisan M1",versionId:"normal",versionName:"标准版",colorName:"白 · 哑光铝合金",colorId:"whiteA",capacity:"4GB RAM + 32GB ROM",summary:"此版本为白色面板、哑光铝合金中框",originalPrice:2499,price:2499},{sku:"100021202",category:"m1",inch:"5.15",name:"Smartisan M1",versionId:"normal",versionName:"标准版",colorName:"咖啡金 · 真皮",colorId:"coffee",capacity:"4GB RAM + 32GB ROM",summary:"此版本为咖啡金色面板、哑光铝合金中框、真皮后盖",originalPrice:2499,price:2499}];return e},n.prototype.m1l=function(){var e=[{sku:"100021303",category:"m1l",inch:"5.7",name:"Smartisan M1L",versionId:"normal",versionName:"标准版",colorName:"咖啡金 · 真皮",colorId:"coffee",capacity:"4GB RAM + 32GB ROM",summary:"此版本为咖啡金色面板、哑光铝合金中框、真皮后盖",originalPrice:2799,price:2799},{sku:"100021301",category:"m1l",inch:"5.7",name:"Smartisan M1L",versionId:"normal",versionName:"标准版",colorName:"白 · 哑光铝合金",colorId:"whiteA",capacity:"4GB RAM + 32GB ROM",summary:"此版本为白色面板、哑光铝合金中框",originalPrice:2799,price:2799},{sku:"100021306",category:"m1l",inch:"5.7",name:"Smartisan M1L",versionId:"senior",versionName:"高配版",colorName:"白 · 镜面不锈钢",colorId:"whiteB",capacity:"6GB RAM + 64GB ROM",summary:"此版本为白色面板、镜面不锈钢中框",originalPrice:3299,price:3299},{sku:"100021304",category:"m1l",inch:"5.7",name:"Smartisan M1L",versionId:"senior",versionName:"高配版",colorName:"咖啡金 · 真皮",colorId:"coffee",capacity:"6GB RAM + 64GB ROM",summary:"此版本为咖啡金色面板、哑光铝合金中框、真皮后盖",originalPrice:2999,price:2999},{sku:"100021302",category:"m1l",inch:"5.7",name:"Smartisan M1L",versionId:"senior",versionName:"高配版",colorName:"白 · 哑光铝合金",colorId:"whiteA",capacity:"6GB RAM + 64GB ROM",summary:"此版本为白色面板、哑光铝合金中框",originalPrice:2999,price:2999}];return e},n.prototype.modelColor=function(){return{t1:{black:{colorLabel:"黑色",thumb:"view/img/store/mobile/s03.png",img:"view/img/store/mobile/01_80.png",image:"view/img/store/mobile/01_80.png",cartImage:"view/img/store/mobile/pm-slide-product-image-black.png",codeImage:"view/img/store/mobile/black-product.png"},white:{colorLabel:"白色",thumb:"view/img/store/mobile/s03_white.png",img:"view/img/store/mobile/01_80_white.png",image:"view/img/store/mobile/01_80_white.png",cartImage:"view/img/store/mobile/pm-slide-product-image-white.png",codeImage:"view/img/store/mobile/white-product.png"
},anniversary:{colorLabel:"一周年纪念版",thumb:"view/img/store/mobile/s03.png",img:"view/img/store/mobile/01_80.png",image:"view/img/store/mobile/01_80.png",cartImage:"view/img/store/mobile/pm-slide-product-image-black.png",codeImage:"view/img/store/mobile/black-product.png"}},t2:{black:{colorLabel:"黑色",img:"view/img/store/t2/t2-black-80.png",image:"view/img/store/t2/t2-black-80.png",codeImage:"view/img/store/t2/t2-cdkey-black.png"}},nuts:{green:{colorLabel:"绿色",thumb:"view/img/store/mobile/jianguo-fixbar-green.png",img:"view/img/store/mobile/jianguo_80_green.png",image:"view/img/store/mobile/jianguo_80_green.png",pageImage:"view/img/store/mobile/nuts-page-green.png",resultImage:"view/img/store/mobile/result-page-green.png",cartImage:"view/img/store/mobile/jianguo-cart-slide-image-green.png",codeImage:"view/img/store/mobile/jianguo-cdkey-green.png"},yellow:{colorLabel:"黄色",thumb:"view/img/store/mobile/jianguo-fixbar-yellow.png",img:"view/img/store/mobile/jianguo_80_yellow.png",image:"view/img/store/mobile/jianguo_80_yellow.png",pageImage:"view/img/store/mobile/nuts-page-yellow.png",resultImage:"view/img/store/mobile/result-page-yellow.png",cartImage:"view/img/store/mobile/jianguo-cart-slide-image-yellow.png",codeImage:"view/img/store/mobile/jianguo-cdkey-yellow.png"},orange:{colorLabel:"橙色",thumb:"view/img/store/mobile/jianguo-fixbar-orange.png",img:"view/img/store/mobile/jianguo_80_orange.png",image:"view/img/store/mobile/jianguo_80_orange.png",pageImage:"view/img/store/mobile/nuts-page-orange.png",resultImage:"view/img/store/mobile/result-page-orange.png",cartImage:"view/img/store/mobile/jianguo-cart-slide-image-orange.png",codeImage:"view/img/store/mobile/jianguo-cdkey-orange.png"},purple:{colorLabel:"紫色",thumb:"view/img/store/mobile/jianguo-fixbar-purple.png",img:"view/img/store/mobile/jianguo_80_purple.png",image:"view/img/store/mobile/jianguo_80_purple.png",pageImage:"view/img/store/mobile/nuts-page-purple.png",resultImage:"view/img/store/mobile/result-page-purple.png",cartImage:"view/img/store/mobile/jianguo-cart-slide-image-purple.png",codeImage:"view/img/store/mobile/jianguo-cdkey-purple.png"},red:{colorLabel:"红色",thumb:"view/img/store/mobile/jianguo-fixbar-red.png",img:"view/img/store/mobile/jianguo_80_red.png",image:"view/img/store/mobile/jianguo_80_red.png",pageImage:"view/img/store/mobile/nuts-page-red.png",resultImage:"view/img/store/mobile/result-page-red.png",cartImage:"view/img/store/mobile/jianguo-cart-slide-image-red.png",codeImage:"view/img/store/mobile/jianguo-cdkey-red.png"},blue:{colorLabel:"蓝色",thumb:"view/img/store/mobile/jianguo-fixbar-blue.png",img:"view/img/store/mobile/jianguo_80_blue.png",image:"view/img/store/mobile/jianguo_80_blue.png",pageImage:"view/img/store/mobile/nuts-page-blue.png",resultImage:"view/img/store/mobile/result-page-blue.png",cartImage:"view/img/store/mobile/jianguo-cart-slide-image-blue.png",codeImage:"view/img/store/mobile/jianguo-cdkey-blue.png"},"light-blue":{colorLabel:"青色",thumb:"view/img/store/mobile/jianguo-fixbar-light-blue.png",img:"view/img/store/mobile/jianguo_80_light_blue.png",image:"view/img/store/mobile/jianguo_80_light_blue.png",pageImage:"view/img/store/mobile/nuts-page-light-blue.png",resultImage:"view/img/store/mobile/result-page-light-blue.png",cartImage:"view/img/store/mobile/jianguo-cart-slide-image-light-blue.png",codeImage:"view/img/store/mobile/jianguo-cdkey-light-blue.png"},gray:{colorLabel:"灰色",thumb:"view/img/store/mobile/jianguo-fixbar-gray.png",img:"view/img/store/mobile/jianguo_80_gray.png",image:"view/img/store/mobile/jianguo_80_gray.png",pageImage:"view/img/store/mobile/nuts-page-gray.png",resultImage:"view/img/store/mobile/result-page-gray.png",cartImage:"view/img/store/mobile/jianguo-cart-slide-image-gray.png",codeImage:"view/img/store/mobile/jianguo-cdkey-gray.png"},black:{colorLabel:"黑色",thumb:"view/img/store/mobile/jianguo-fixbar-black.png",img:"view/img/store/mobile/jianguo_80_black.png",image:"view/img/store/mobile/jianguo_80_black.png",pageImage:"view/img/store/mobile/nuts-page-black.png",resultImage:"view/img/store/mobile/result-page-black.png",cartImage:"view/img/store/mobile/jianguo-cart-slide-image-black.png",codeImage:"view/img/store/mobile/jianguo-cdkey-black.png"},violet:{colorLabel:"鸠羽紫",thumb:"view/img/store/mobile/jianguo-fixbar-violet.png",img:"view/img/store/mobile/jianguo_80_violet.png",image:"view/img/store/mobile/jianguo_80_violet.png",pageImage:"view/img/store/mobile/nuts-page-violet.png",resultImage:"view/img/store/mobile/result-page-violet.png",cartImage:"view/img/store/mobile/jianguo-cart-slide-image-violet.png",codeImage:"view/img/store/mobile/jianguo-cdkey-violet.png"},sand:{colorLabel:"枯草",thumb:"view/img/store/mobile/jianguo-fixbar-sand.png",img:"view/img/store/mobile/jianguo_80_sand.png",image:"view/img/store/mobile/jianguo_80_sand.png",pageImage:"view/img/store/mobile/nuts-page-sand.png",resultImage:"view/img/store/mobile/result-page-sand.png",cartImage:"view/img/store/mobile/jianguo-cart-slide-image-sand.png",codeImage:"view/img/store/mobile/jianguo-cdkey-sand.png"},olive:{colorLabel:"柳煤竹茶",thumb:"view/img/store/mobile/jianguo-fixbar-olive.png",img:"view/img/store/mobile/jianguo_80_olive.png",image:"view/img/store/mobile/jianguo_80_olive.png",pageImage:"view/img/store/mobile/nuts-page-olive.png",resultImage:"view/img/store/mobile/result-page-olive.png",cartImage:"view/img/store/mobile/jianguo-cart-slide-image-olive.png",codeImage:"view/img/store/mobile/jianguo-cdkey-olive.png"},coffee:{colorLabel:"落栗",thumb:"view/img/store/mobile/jianguo-fixbar-coffee.png",img:"view/img/store/mobile/jianguo_80_coffee.png",image:"view/img/store/mobile/jianguo_80_coffee.png",pageImage:"view/img/store/mobile/nuts-page-coffee.png",resultImage:"view/img/store/mobile/result-page-coffee.png",cartImage:"view/img/store/mobile/jianguo-cart-slide-image-coffee.png",codeImage:"view/img/store/mobile/jianguo-cdkey-coffee.png"},grass:{colorLabel:"锖青磁",thumb:"view/img/store/mobile/jianguo-fixbar-grass.png",img:"view/img/store/mobile/jianguo_80_grass.png",image:"view/img/store/mobile/jianguo_80_grass.png",pageImage:"view/img/store/mobile/nuts-page-grass.png",resultImage:"view/img/store/mobile/result-page-grass.png",cartImage:"view/img/store/mobile/jianguo-cart-slide-image-grass.png",codeImage:"view/img/store/mobile/jianguo-cdkey-grass.png"},pink:{colorLabel:"石竹",thumb:"view/img/store/mobile/jianguo-fixbar-pink.png",img:"view/img/store/mobile/jianguo_80_pink.png",image:"view/img/store/mobile/jianguo_80_pink.png",pageImage:"view/img/store/mobile/nuts-page-pink.png",resultImage:"view/img/store/mobile/result-page-pink.png",cartImage:"view/img/store/mobile/jianguo-cart-slide-image-pink.png",codeImage:"view/img/store/mobile/jianguo-cdkey-pink.png"},rose:{colorLabel:"苏芳",thumb:"view/img/store/mobile/jianguo-fixbar-rose.png",img:"view/img/store/mobile/jianguo_80_rose.png",image:"view/img/store/mobile/jianguo_80_rose.png",pageImage:"view/img/store/mobile/nuts-page-rose.png",resultImage:"view/img/store/mobile/result-page-rose.png",cartImage:"view/img/store/mobile/jianguo-cart-slide-image-rose.png",codeImage:"view/img/store/mobile/jianguo-cdkey-rose.png"},bone:{colorLabel:"远州鼠",thumb:"view/img/store/mobile/jianguo-fixbar-bone.png",img:"view/img/store/mobile/jianguo_80_bone.png",image:"view/img/store/mobile/jianguo_80_bone.png",pageImage:"view/img/store/mobile/nuts-page-bone.png",resultImage:"view/img/store/mobile/result-page-bone.png",cartImage:"view/img/store/mobile/jianguo-cart-slide-image-bone.png",codeImage:"view/img/store/mobile/jianguo-cdkey-bone.png"}},m1:{whiteA:{colorLabel:"白色 + 铝合金",img:"view/img/store/t2/t2-black-80.png",image:"view/img/store/t2/t2-black-80.png",codeImage:"view/img/store/t2/t2-cdkey-black.png"},coffee:{colorLabel:"咖啡色 + 真皮",img:"view/img/store/t2/t2-black-80.png",image:"view/img/store/t2/t2-black-80.png",codeImage:"view/img/store/t2/t2-cdkey-black.png"}},m1l:{whiteA:{colorLabel:"白色 + 铝合金",img:"view/img/store/t2/t2-black-80.png",image:"view/img/store/t2/t2-black-80.png",codeImage:"view/img/store/t2/t2-cdkey-black.png"},coffee:{colorLabel:"咖啡色 + 真皮",img:"view/img/store/t2/t2-black-80.png",image:"view/img/store/t2/t2-black-80.png",codeImage:"view/img/store/t2/t2-cdkey-black.png"},whiteB:{colorLabel:"白色 + 不锈钢",img:"view/img/store/t2/t2-black-80.png",image:"view/img/store/t2/t2-black-80.png",codeImage:"view/img/store/t2/t2-cdkey-black.png"}}}},n.prototype.modelCover=function(){return{nuts:[{sku:100010601,category:"youth",name:"坚果手机彩色背盖 青色",price:49,max:10,color:"light-blue",colorLabel:"青色",img:"view/img/store/mobile/cover-thumb-80-light-blue.png",image:"view/img/store/mobile/cover-thumb-80-light-blue.png",pageImage:"view/img/store/mobile/nuts-page-light-blue.png"},{sku:100010602,category:"youth",name:"坚果手机彩色背盖 绿色",price:49,max:10,color:"green",colorLabel:"绿色",img:"view/img/store/mobile/cover-thumb-80-green.png",image:"view/img/store/mobile/cover-thumb-80-green.png",pageImage:"view/img/store/mobile/nuts-page-green.png"},{sku:100010603,category:"youth",name:"坚果手机彩色背盖 黄色",price:49,max:10,color:"yellow",colorLabel:"黄色",img:"view/img/store/mobile/cover-thumb-80-yellow.png",image:"view/img/store/mobile/cover-thumb-80-yellow.png",pageImage:"view/img/store/mobile/nuts-page-yellow.png"},{sku:100010604,category:"youth",name:"坚果手机彩色背盖 橙色",price:49,max:10,color:"orange",colorLabel:"橙色",img:"view/img/store/mobile/cover-thumb-80-orange.png",image:"view/img/store/mobile/cover-thumb-80-orange.png",pageImage:"view/img/store/mobile/nuts-page-orange.png"},{sku:100010605,category:"youth",name:"坚果手机彩色背盖 紫色",price:49,max:10,color:"purple",colorLabel:"紫色",img:"view/img/store/mobile/cover-thumb-80-purple.png",image:"view/img/store/mobile/cover-thumb-80-purple.png",pageImage:"view/img/store/mobile/nuts-page-purple.png"},{sku:100010606,category:"youth",name:"坚果手机彩色背盖 红色",price:49,max:10,color:"red",colorLabel:"红色",img:"view/img/store/mobile/cover-thumb-80-red.png",image:"view/img/store/mobile/cover-thumb-80-red.png",pageImage:"view/img/store/mobile/nuts-page-red.png"},{sku:100010607,category:"youth",name:"坚果手机彩色背盖 蓝色",price:49,max:10,color:"blue",colorLabel:"蓝色",img:"view/img/store/mobile/cover-thumb-80-blue.png",image:"view/img/store/mobile/cover-thumb-80-blue.png",pageImage:"view/img/store/mobile/nuts-page-blue.png"},{sku:100010608,category:"youth",name:"坚果手机彩色背盖 白色",price:49,max:10,color:"white",colorLabel:"白色",img:"view/img/store/mobile/cover-thumb-80-white.png",image:"view/img/store/mobile/cover-thumb-80-white.png",pageImage:"view/img/store/mobile/nuts-page-white.png"},{sku:100013701,category:"art",name:"坚果手机文艺青年版背壳 鸠羽紫",price:49,max:10,color:"violet",colorLabel:"鸠羽紫",img:"view/img/store/mobile/cover-thumb-80-violet.jpg",image:"view/img/store/mobile/cover-thumb-80-violet.jpg",pageImage:"view/img/store/mobile/nuts-page-violet.png"},{sku:100013702,category:"art",name:"坚果手机文艺青年版背壳 苏芳",price:49,max:10,color:"rose",colorLabel:"苏芳",img:"view/img/store/mobile/cover-thumb-80-rose.jpg",image:"view/img/store/mobile/cover-thumb-80-rose.jpg",pageImage:"view/img/store/mobile/nuts-page-rose.png"},{sku:100013703,category:"art",name:"坚果手机文艺青年版背壳 落栗",price:49,max:10,color:"coffee",colorLabel:"落栗",img:"view/img/store/mobile/cover-thumb-80-coffee.jpg",image:"view/img/store/mobile/cover-thumb-80-coffee.jpg",pageImage:"view/img/store/mobile/nuts-page-coffee.png"},{sku:100013704,category:"art",name:"坚果手机文艺青年版背壳 柳煤竹茶",price:49,max:10,color:"olive",colorLabel:"柳煤竹茶",img:"view/img/store/mobile/cover-thumb-80-olive.jpg",image:"view/img/store/mobile/cover-thumb-80-olive.jpg",pageImage:"view/img/store/mobile/nuts-page-olive.png"},{sku:100013705,category:"art",name:"坚果手机文艺青年版背壳 枯草",price:49,max:10,color:"sand",colorLabel:"枯草",img:"view/img/store/mobile/cover-thumb-80-sand.jpg",image:"view/img/store/mobile/cover-thumb-80-sand.jpg",pageImage:"view/img/store/mobile/nuts-page-sand.png"},{sku:100013706,category:"art",name:"坚果手机文艺青年版背壳 石竹",price:49,max:10,color:"pink",colorLabel:"石竹",img:"view/img/store/mobile/cover-thumb-80-pink.jpg",image:"view/img/store/mobile/cover-thumb-80-pink.jpg",pageImage:"view/img/store/mobile/nuts-page-pink.png"},{sku:100013707,category:"art",name:"坚果手机文艺青年版背壳 远州鼠",price:49,max:10,color:"bone",colorLabel:"远州鼠",img:"view/img/store/mobile/cover-thumb-80-bone.jpg",image:"view/img/store/mobile/cover-thumb-80-bone.jpg",pageImage:"view/img/store/mobile/nuts-page-bone.png"},{sku:100013708,category:"art",name:"坚果手机文艺青年版背壳 锖青磁",price:49,max:10,color:"grass",colorLabel:"锖青磁",img:"view/img/store/mobile/cover-thumb-80-grass.jpg",image:"view/img/store/mobile/cover-thumb-80-grass.jpg",pageImage:"view/img/store/mobile/nuts-page-grass.png"}],t2:[{sku:100014901,category:"t2",name:"Smartisan T2 手机保护套 红色",price:49,max:10,color:"red",colorLabel:"红色",img:"view/img/store/t2/t2-cover-thumb-80-red.png",image:"view/img/store/t2/t2-cover-thumb-80-red.png",pageImage:"view/img/store/t2/t2-cover-page-red.png"},{sku:100014902,category:"t2",name:"Smartisan T2 手机保护套 黑色",price:49,max:10,color:"black",colorLabel:"黑色",img:"view/img/store/t2/t2-cover-thumb-80-black.png",image:"view/img/store/t2/t2-cover-thumb-80-black.png",pageImage:"view/img/store/t2/t2-cover-page-black.png"}]}},n.prototype.modelHeadset=function(){return[{sku:100013608,name:"S-1000 BASS（红色，低频增强线控版）",version:"bass",versionLabel:"低频增强版",versionLessLabel:"增强版",ctrl:"line",ctrlLabel:"线控版",price:199,max:5,color:"red",colorLabel:"红色",img:"view/img/store/mobile/headset_80_red.jpg",image:"view/img/store/mobile/headset_80_red.jpg",pageImage:"view/img/store/mobile/nuts-page-light-blue.png"},{sku:100013610,name:"S-1000（红色，三段式均衡线控版）",version:"three",versionLabel:"三段式均衡版",versionLessLabel:"均衡版",ctrl:"line",ctrlLabel:"线控版",price:199,max:5,color:"red",colorLabel:"红色",img:"view/img/store/mobile/headset_80_red.jpg",image:"view/img/store/mobile/headset_80_red.jpg",pageImage:"view/img/store/mobile/nuts-page-light-blue.png"},{sku:100013612,name:"S-1000 BASS（黑色，低频增强线控版）",version:"bass",versionLabel:"低频增强版",versionLessLabel:"增强版",ctrl:"line",ctrlLabel:"线控版",price:199,max:5,color:"black",colorLabel:"黑色",img:"view/img/store/mobile/headset_80_black.jpg",image:"view/img/store/mobile/headset_80_black.jpg",pageImage:"view/img/store/mobile/nuts-page-light-blue.png"},{sku:100013614,name:"S-1000（黑色，三段式均衡线控版）",version:"three",versionLabel:"三段式均衡版",versionLessLabel:"均衡版",ctrl:"line",ctrlLabel:"线控版",price:199,max:5,color:"black",colorLabel:"黑色",img:"view/img/store/mobile/headset_80_black.jpg",image:"view/img/store/mobile/headset_80_black.jpg",pageImage:"view/img/store/mobile/nuts-page-light-blue.png"},{sku:100013616,name:"S-1000 BASS（米白色，低频增强线控版）",version:"bass",versionLabel:"低频增强版",versionLessLabel:"增强版",ctrl:"line",ctrlLabel:"线控版",price:199,max:5,color:"beige-white",colorLabel:"米白色",img:"view/img/store/mobile/headset_80_white.jpg",image:"view/img/store/mobile/headset_80_white.jpg",pageImage:"view/img/store/mobile/nuts-page-light-blue.png"},{sku:100013618,name:"S-1000（米白色，三段式均衡线控版）",version:"three",versionLabel:"三段式均衡版",versionLessLabel:"均衡版",ctrl:"line",ctrlLabel:"线控版",price:199,max:5,color:"beige-white",colorLabel:"米白色",img:"view/img/store/mobile/headset_80_white.jpg",image:"view/img/store/mobile/headset_80_white.jpg",pageImage:"view/img/store/mobile/nuts-page-light-blue.png"},{sku:100013607,name:"S-1000 BASS（红色，低频增强音乐版）",version:"bass",versionLabel:"低频增强版",versionLessLabel:"增强版",ctrl:"music",ctrlLabel:"音乐版",price:179,max:5,color:"red",colorLabel:"红色",img:"view/img/store/mobile/headset_80_red.jpg",image:"view/img/store/mobile/headset_80_red.jpg",pageImage:"view/img/store/mobile/nuts-page-light-blue.png"},{sku:100013609,name:"S-1000（红色，三段式均衡音乐版）",version:"three",versionLabel:"三段式均衡版",versionLessLabel:"均衡版",ctrl:"music",ctrlLabel:"音乐版",price:179,max:5,color:"red",colorLabel:"红色",img:"view/img/store/mobile/headset_80_red.jpg",image:"view/img/store/mobile/headset_80_red.jpg",pageImage:"view/img/store/mobile/nuts-page-light-blue.png"},{sku:100013611,name:"S-1000 BASS（黑色，低频增强音乐版）",version:"bass",versionLabel:"低频增强版",versionLessLabel:"增强版",ctrl:"music",ctrlLabel:"音乐版",price:179,max:5,color:"black",colorLabel:"黑色",img:"view/img/store/mobile/headset_80_black.jpg",image:"view/img/store/mobile/headset_80_black.jpg",pageImage:"view/img/store/mobile/nuts-page-light-blue.png"},{sku:100013613,name:"S-1000（黑色，三段式均衡音乐版）",version:"three",versionLabel:"三段式均衡版",versionLessLabel:"均衡版",ctrl:"music",ctrlLabel:"音乐版",price:179,max:5,color:"black",colorLabel:"黑色",img:"view/img/store/mobile/headset_80_black.jpg",image:"view/img/store/mobile/headset_80_black.jpg",pageImage:"view/img/store/mobile/nuts-page-light-blue.png"},{sku:100013615,name:"S-1000 BASS（白色，低频增强音乐版）",version:"bass",versionLabel:"低频增强版",versionLessLabel:"增强版",ctrl:"music",ctrlLabel:"音乐版",price:179,max:5,color:"white",colorLabel:"白色",img:"view/img/store/mobile/headset_80_white.jpg",image:"view/img/store/mobile/headset_80_white.jpg",pageImage:"view/img/store/mobile/nuts-page-light-blue.png"},{sku:100013617,name:"S-1000（白色，三段式均衡音乐版）",version:"three",versionLabel:"三段式均衡版",versionLessLabel:"均衡版",ctrl:"music",ctrlLabel:"音乐版",price:179,max:5,color:"white",colorLabel:"白色",img:"view/img/store/mobile/headset_80_white.jpg",image:"view/img/store/mobile/headset_80_white.jpg",pageImage:"view/img/store/mobile/nuts-page-light-blue.png"}]},n.prototype.parsePhones=function(e,t){var o=this,i={mapNormal:{},mapYoung:{},mapBlack:{},mapDefect:{},mapSenior:{},listNormal:[],listYoung:[],listBlack:[],listDefect:[],listSenior:[]},a=[].concat(e),r={nuts:"坚果手机",t1:"Smartisan T1",t2:"Smartisan T2",m1:"Smartisan M1",m1l:"Smartisan M1L"};return $.each(a,function(e,a){switch(a=$.extend({},a,t[a.color],{categoryLabel:r[a.category]||null}),a.id=a.goods_id=a.sku,o.mapPhones[a.sku]=a,a.version){case"defect":i.mapDefect[a.sku]=a,i.listDefect.push(a);break;case"young":i.mapYoung[a.sku]=a,i.listYoung.push(a);break;case"black":i.mapBlack[a.sku]=a,i.listBlack.push(a);break;case"senior":i.mapSenior[a.sku]=a,i.listSenior.push(a);break;default:i.mapNormal[a.sku]=a,i.listNormal.push(a)}}),i},n.prototype.formatCoverData=function(){var e=this,t=e.modelCover(),o=[].concat(t.nuts),i=[].concat(t.t2);$.each(o,function(t,o){o=$.extend({},o,{image:o.img,id:o.sku,goods_id:o.sku,categoryName:"背壳"}),e.mapCovers[o.sku]=o,e.listCoversNuts.push(o)}),$.each(i,function(t,o){o=$.extend({},o,{image:o.img,id:o.sku,goods_id:o.sku,categoryName:"保护套"}),e.mapCovers[o.sku]=o,e.listCoversT2.push(o)})},n.prototype.formatHeadsetData=function(){var e=this,t=e.modelHeadset(),o=[].concat(t);$.each(o,function(t,o){o=$.extend({},o,{image:o.img,id:o.sku,goods_id:o.sku,categoryName:"耳机"}),e.mapHeadset[o.sku]=o,e.listHeadset.push(o)})},n.prototype.getMobileSkus=function(){return{t2:_.pluck(this.t2(),"sku"),jianguo:_.pluck(this.nuts(),"sku"),m1:_.pluck(this.m1(),"sku"),m1l:_.pluck(this.m1l(),"sku")}},n.prototype.getMobileSpus=function(){return{m1:["1000212"],m1l:["1000213"],jianguopro:["1000273"],t2:["1000145","1000170"],jianguo:["1000073","1000129","1000130","1000131","1000132","1000133","1000158","1000159","1000169","1000203","1000204","1000205","1000206"]}},n.prototype.getQHCoversSkus=function(){return["100016001","100014801","100014701","100014601","100014101","100014001","100013801","100012601","100012501","100012301","100012201","100012001","100011901","100011801","100011701","100011601","100011501","100011301","100011201","100011102","100011101","100011001","100010901"]},new n}]),appsServices.constant("PhonesConfig",{phones:{100007303:{category:"nuts",warranty:["100010301","100010302"],sku:"100007303"},100007304:{category:"nuts",warranty:["100010301","100010302"],sku:"100007304"},100007305:{category:"nuts",warranty:["100010301","100010302"],sku:"100007305"},100007306:{category:"nuts",warranty:["100010301","100010302"],sku:"100007306"},100007307:{category:"nuts",warranty:["100010301","100010302"],sku:"100007307"},100007308:{category:"nuts",warranty:["100010301","100010302"],sku:"100007308"},100007309:{category:"nuts",warranty:["100010301","100010302"],sku:"100007309"},100007310:{category:"nuts",warranty:["100010301","100010302"],sku:"100007310"},100007311:{category:"nuts",warranty:["100010301","100010302"],sku:"100007311"},100007312:{category:"nuts",warranty:["100010301","100010302"],sku:"100007312"},100007313:{category:"nuts",warranty:["100010301","100010302"],sku:"100007313"},100007314:{category:"nuts",warranty:["100010301","100010302"],sku:"100007314"},100007315:{category:"nuts",warranty:["100010301","100010302"],sku:"100007315"},100007316:{category:"nuts",warranty:["100010301","100010302"],sku:"100007316"},100007317:{category:"nuts",warranty:["100010301","100010302"],sku:"100007317"},100007318:{category:"nuts",warranty:["100010301","100010302"],sku:"100007318"},100007319:{category:"nuts",warranty:["100010301","100010302"],sku:"100007319"},100007320:{category:"nuts",warranty:["100010301","100010302"],sku:"100007320"},100012901:{category:"nuts",warranty:["100010301","100010302"],sku:"100012901"},100012902:{category:"nuts",warranty:["100010301","100010302"],sku:"100012902"},100012903:{category:"nuts",warranty:["100010301","100010302"],sku:"100012903"},100012904:{category:"nuts",warranty:["100010301","100010302"],sku:"100012904"},100012905:{category:"nuts",warranty:["100010301","100010302"],sku:"100012905"},100012906:{category:"nuts",warranty:["100010301","100010302"],sku:"100012906"},100012907:{category:"nuts",warranty:["100010301","100010302"],sku:"100012907"},100012908:{category:"nuts",warranty:["100010301","100010302"],sku:"100012908"},100012909:{category:"nuts",warranty:["100010301","100010302"],sku:"100012909"},100012910:{category:"nuts",warranty:["100010301","100010302"],sku:"100012910"},100012911:{category:"nuts",warranty:["100010301","100010302"],sku:"100012911"},100012912:{category:"nuts",warranty:["100010301","100010302"],sku:"100012912"},100012913:{category:"nuts",warranty:["100010301","100010302"],sku:"100012913"},100012914:{category:"nuts",warranty:["100010301","100010302"],sku:"100012914"},100012915:{category:"nuts",warranty:["100010301","100010302"],sku:"100012915"},100012916:{category:"nuts",warranty:["100010301","100010302"],sku:"100012916"},100012917:{category:"nuts",warranty:["100010301","100010302"],sku:"100012917"},100012918:{category:"nuts",warranty:["100010301","100010302"],sku:"100012918"},100013001:{category:"nuts",warranty:["100010301","100010302"],sku:"100013001"},100013002:{category:"nuts",warranty:["100010301","100010302"],sku:"100013002"},100013003:{category:"nuts",warranty:["100010301","100010302"],sku:"100013003"},100013004:{category:"nuts",warranty:["100010301","100010302"],sku:"100013004"},100013005:{category:"nuts",warranty:["100010301","100010302"],sku:"100013005"},100013006:{category:"nuts",warranty:["100010301","100010302"],sku:"100013006"},100013007:{category:"nuts",warranty:["100010301","100010302"],sku:"100013007"},100013008:{category:"nuts",warranty:["100010301","100010302"],sku:"100013008"},100013009:{category:"nuts",warranty:["100010301","100010302"],sku:"100013009"},100013010:{category:"nuts",warranty:["100010301","100010302"],sku:"100013010"},100013011:{category:"nuts",warranty:["100010301","100010302"],sku:"100013011"},100013012:{category:"nuts",warranty:["100010301","100010302"],sku:"100013012"},100013013:{category:"nuts",warranty:["100010301","100010302"],sku:"100013013"},100013014:{category:"nuts",warranty:["100010301","100010302"],sku:"100013014"},100013015:{category:"nuts",warranty:["100010301","100010302"],sku:"100013015"},100013016:{category:"nuts",warranty:["100010301","100010302"],sku:"100013016"},100013017:{category:"nuts",warranty:["100010301","100010302"],sku:"100013017"},100013018:{category:"nuts",warranty:["100010301","100010302"],sku:"100013018"},100013101:{category:"nuts",warranty:["100010301","100010302"],sku:"100013101"},100013102:{category:"nuts",warranty:["100010301","100010302"],sku:"100013102"},100013103:{category:"nuts",warranty:["100010301","100010302"],sku:"100013103"},100013104:{category:"nuts",warranty:["100010301","100010302"],sku:"100013104"},100013105:{category:"nuts",warranty:["100010301","100010302"],sku:"100013105"},100013106:{category:"nuts",warranty:["100010301","100010302"],sku:"100013106"},100013107:{category:"nuts",warranty:["100010301","100010302"],sku:"100013107"},100013108:{category:"nuts",warranty:["100010301","100010302"],sku:"100013108"},100013201:{category:"nuts",warranty:["100010301","100010302"],sku:"100013201"},100013202:{category:"nuts",warranty:["100010301","100010302"],sku:"100013202"},100013203:{category:"nuts",warranty:["100010301","100010302"],sku:"100013203"},100013204:{category:"nuts",warranty:["100010301","100010302"],sku:"100013204"},100013205:{category:"nuts",warranty:["100010301","100010302"],sku:"100013205"},100013206:{category:"nuts",warranty:["100010301","100010302"],sku:"100013206"},100013207:{category:"nuts",warranty:["100010301","100010302"],sku:"100013207"},100013208:{category:"nuts",warranty:["100010301","100010302"],sku:"100013208"},100013301:{category:"nuts",warranty:["100010301","100010302"],sku:"100013301"},100013302:{category:"nuts",warranty:["100010301","100010302"],sku:"100013302"},100013303:{category:"nuts",warranty:["100010301","100010302"],sku:"100013303"},100013304:{category:"nuts",warranty:["100010301","100010302"],sku:"100013304"},100013305:{category:"nuts",warranty:["100010301","100010302"],sku:"100013305"},100013306:{category:"nuts",warranty:["100010301","100010302"],sku:"100013306"},100013307:{category:"nuts",warranty:["100010301","100010302"],sku:"100013307"},100013308:{category:"nuts",warranty:["100010301","100010302"],sku:"100013308"},100014501:{category:"t2",warranty:["100014401","100014402"],sku:"100014501"},100014502:{category:"t2",warranty:["100014401","100014402"],sku:"100014502"},100015801:{category:"nuts",warranty:["100010301","100010302"],sku:"100015801"},100015803:{category:"nuts",warranty:["100010301","100010302"],sku:"100015803"},100015804:{category:"nuts",warranty:["100010301","100010302"],sku:"100015804"},100015901:{category:"nuts",warranty:["100010301","100010302"],sku:"100015901"},100021201:{category:"m1",warranty:["100021401","100021501"],sku:"100021201"},100021202:{category:"m1",warranty:["100021401","100021501"],sku:"100021202"},100021301:{category:"m1l",warranty:["100021601","100021701"],sku:"100021301"},100021302:{category:"m1l",warranty:["100021601","100021701"],sku:"100021302"},100021303:{category:"m1l",warranty:["100021601","100021701"],sku:"100021303"},100021304:{category:"m1l",warranty:["100021601","100021701"],sku:"100021304"},100021306:{category:"m1l",warranty:["100021601","100021701"],sku:"100021306"}},warranty:{100014402:{sku:100014402,category:" Smartisan T2 ",categoryShort:"t2"},100014401:{sku:100014401,category:" Smartisan T2 ",categoryShort:"t2"},100010302:{sku:100010302,category:"坚果手机",categoryShort:"nuts"},100010301:{sku:100010301,category:"坚果手机",categoryShort:"nuts"}}}),appsServices.factory("AddCartAnimation",["$rootScope","$collection","Config",function(e,t,o){function i(e){var t=this,o={mask:".addcart-mask",maskY:".mask-y",maskX:".mask-x",maskItem:".mask-item",el:".content",button:".blue-title-btn",cartLabel:".nav-global",cartIcon:"a",cartNumber:".cart-num",speedTime:300};t.settings=$.extend(o,e||{}),t.len_x=0,t.len_y=0,t.slidTime=0,t.bounceMoreY=45,t.cartTop=160,t.itemToCart=!0,t.isCartHide=!1,t.timeMenuInit,t.timeMenuHide,$.each(t.settings,function(e,o){t.settings[e]=$.trim(o)}),t.isRunning=!1,$(window).scroll(function(){var e=$(window).scrollTop();e>=t.cartTop?t.isCartHide=!0:t.isCartHide=!1})}return i.prototype.init=function(e,t){var o=this;o.isRunning||(o.timeMenuInit=!0,t=t||"",o.$mask=$(o.settings.mask),o.$maskY=o.$mask.find(o.settings.maskY),o.$maskX=o.$mask.find(o.settings.maskX),o.$maskItem=o.$mask.find(o.settings.maskItem),o.$el=$(o.settings.el),o.$button=o.$el.find(o.settings.button),o.$cartLabel=$(o.settings.cartLabel),o.$cartIcon=o.$cartLabel.children(o.settings.cartIcon),o.$cartNumber=o.$cartLabel.find(o.settings.cartNumber),0==o.$button.length&&(o.itemToCart=!1,o.$button=$(e)),t&&o.$maskItem.css({"background-image":"url( "+t+")"}))},i.prototype.start=function(){var e=this,t={},o=10;e.maskWidth=e.$cartIcon.offset().left+22-(e.$button.offset().left+e.$button[0].clientWidth/2),e.maskHeight=Math.abs(e.$cartIcon.offset().top+10-(e.$button.offset().top+e.$button[0].clientHeight/2)),e.len_x=Math.abs(e.maskWidth/279)/10,e.len_y=Math.abs(e.maskHeight/360)/10,e.slidTime=Math.max(e.len_x,e.len_y),e.$mask.show(20),setTimeout(function(){e.isRunning=!0,t={width:e.maskWidth,height:e.maskHeight,top:o},e.$mask.css(t),setTimeout(function(){e.slidInto()},20),setTimeout(function(){e.reset(),e.timeMenuInit&&(clearTimeout(e.timeMenuHide),e.timeMenuHide=setTimeout(function(){e.menuHide()},6e3))},e.itemToCart?900:900+1e3*e.slidTime)},30)},i.prototype.getIsRunnng=function(){var e=this;return e.isRunning},i.prototype.slidInto=function(){var e=this;e.itemToCart?e.$maskY.addClass("mask-y1"):e.$maskY.css({transform:"translateY(-"+(e.maskHeight+e.bounceMoreY)+"px)",transition:"transform "+(.3+e.slidTime)+"s cubic-bezier(0,0,.58,1)"}),e.itemToCart?e.$maskX.addClass("mask-x1"):e.$maskX.css({transform:"translateX("+e.maskWidth+"px)",transition:"transform "+(.45+e.slidTime)+"s cubic-bezier(0, 0, 1, 1)"}),e.$maskItem.addClass("mask-item1");var t=!1;e.$maskY.on("webkitTransitionEnd transitionend",function(o){var i=$(o.target);i.hasClass(e.settings.maskY.substr(1))&&!t&&(t=!0,e.itemToCart?e.$maskY.addClass("mask-y2"):e.$maskY.css({transform:"translateY(-"+e.maskHeight+"px)",transition:"transform 0.2s cubic-bezier(0,0,.58,1)"}),$(this).off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"))}),setTimeout(function(){e.$maskItem.addClass("mask-item2"),e.$cartLabel.addClass("active")},e.itemToCart?600:400+1e3*e.slidTime)},i.prototype.pop=function(){var e=this;e.$cartNumber.addClass("cart-num-active")},i.prototype.menuHide=function(){var e=this;e.$cartLabel.removeClass("active")},i.prototype.clearTimeMenuHide=function(){var e=this;e.timeMenuInit&&(clearTimeout(e.timeMenuHide),e.timeMenuInit=!1)},i.prototype.reset=function(){var e=this;e.itemToCart?(e.$maskY.removeClass("mask-y1 mask-y2"),e.$maskX.removeClass("mask-x1")):(e.$maskY.removeAttr("style"),e.$maskX.removeAttr("style")),e.$maskItem.removeClass("mask-item1 mask-item2"),e.$cartNumber.removeClass("cart-num-active"),e.$mask.hide(20),e.isRunning=!1},new i({el:".store-content",button:".banner .blue-title-btn",cartLabel:".nav-global .nav-cart"})}]),appsServices.factory("WarrantysService",["CartRequest","$q","Config","$filter","Utils","StorageService",function(e,t,o,i,a,r){function n(){}return n.prototype.hasWarrantys=function(e){var t=this;return!!t.mapWarrantys[e]||_.some(t.mapWarrantys,function(t){return t.aliases==e})},n.prototype.getWarrantys=function(e){var t=this,o=[];if(e=e||[],e=[].concat(e),e.length<0)return o;var i=_.filter(e,function(e){return!t.mapWarrantys[e].hasFetch});return t.addWarrantys(i).then(function(){return o=_.map(e,function(e){return t.mapWarrantys[e]})})},n.prototype.addWarrantys=function(o){var i=this;return 0==o.length?t.when():e.getSkusInfo({ids:o.join(",")}).then(function(e){var t=e.data.list;angular.forEach(t,function(e,t){var o=e.id,a=i.mapWarrantys[o]||{},r=angular.extend({},a,{price:e.price,hasFetch:!0});e.product_info.is_insurance&&(i.mapWarrantys[o]=r,i.listWarrantys.push(r))})})},n.prototype.getWarrantysWithCategory=function(e){var t=this;e=e||"t1";var o=t.relevanceModel[e]||[];return _.map(o,function(e){return t.mapWarrantys[e]})},n.prototype.relevanceModel={t1:[100000101,100000102],t2:[100014402,100014401],nuts:[100010302,100010301],m1:[100021401,100021501],m1l:[100021601,100021701]},n.prototype.listWarrantys=[],n.prototype.mapWarrantys={100000101:{sku:100000101,aliases:"accident",postName:"safety1",name:"意外保修服务",category:" Smartisan T1 ",categoryShort:"t1",price:200,pageCss:"warranty-accident",img:"view/img/store/mobile/04.png",cartImage:"view/img/store/mobile/04.png",pageImg:"view/img/store/mobile/phonecare-plus.png",
dialogImg:"view/img/store/mobile/dialog-phonecare-normal.png",warning:"您选购的保修服务不支持单独退款，仅可以随手机订单一同退款。",introduction:["在您购买意外保修服务后的一年内，由于意外损坏造成手机硬件故障，将可以获得最多两次维修服务，或 1 次主机更换服务。（本服务优先采取维修服务，若锤子数码售后服务中心确认无法修复，则进行主机更换。）","您可选择在购机时购买，或收货次日起 3 日内购买本服务。",'服务细则参见<a href="http://www.smartisan.com/#/repair" target="_blank">《意外损坏保修服务条款》</a>。']},100000102:{sku:100000102,aliases:"delay",postName:"safety2",name:"延长保修服务",category:" Smartisan T1 ",categoryShort:"t1",price:200,pageCss:"warranty-delay",img:"view/img/store/mobile/05.png",cartImage:"view/img/store/mobile/05.png",pageImg:"view/img/store/mobile/phonecare-plus-1.png",dialogImg:"view/img/store/mobile/dialog-phonecare-other.png",warning:"您选购的保修服务支持单独退款，也可以随手机订单一同退款。",introduction:["如您购买本服务，在手机正常“三包” 1 年保修期结束后，将额外多获得 1 年保修服务。","延长保修服务期为 1 年，自手机正常“三包” 1 年服务期的截止日之次日零时开始，至第二年对应日之 24 时结束。",'服务细则参见<a href="http://www.smartisan.com/#/insurance" target="_blank">《延长保修服务条款》</a>。']},100014402:{sku:100014402,aliases:"t2Accident",postName:"safety1",name:"意外保修服务",category:" Smartisan T2 ",categoryShort:"t2",price:200,pageCss:"warranty-accident",img:"view/img/store/mobile/04.png",cartImage:"view/img/store/mobile/04.png",pageImg:"view/img/store/mobile/phonecare-plus.png",dialogImg:"view/img/store/mobile/dialog-phonecare-normal.png",warning:"您选购的保修服务不支持单独退款，仅可以随手机订单一同退款。",introduction:["在您购买意外保修服务后的一年内，由于摔落碎屏、液体泼溅、挤压等意外损伤造成的手机硬件故障，将可以获得最多两次维修，或 1 次主机更换。","（本服务优先采取维修服务，若锤子数码售后服务中心确认无法修复，则进行主机更换。）您可选择在购机时购买，或收货次日起 3 日内购买本服务。",'服务细则参见<a href="http://www.smartisan.com/#/repair" target="_blank">《意外损坏保修服务条款》</a>。']},100014401:{sku:100014401,aliases:"t2Delay",postName:"safety2",name:"延长保修服务",category:" Smartisan T2 ",categoryShort:"t2",price:200,pageCss:"warranty-delay",img:"view/img/store/mobile/05.png",cartImage:"view/img/store/mobile/05.png",pageImg:"view/img/store/mobile/phonecare-plus-1.png",dialogImg:"view/img/store/mobile/dialog-phonecare-other.png",warning:"您选购的保修服务支持单独退款，也可以随手机订单一同退款。",introduction:["如您购买本服务，在手机正常“三包” 1 年保修期结束后，将额外多获得 1 年保修服务。","延长保修服务期为 1 年，自手机正常“三包” 1 年服务期的截止日之次日零时开始，至第二年对应日之 24 时结束。",'服务细则参见<a href="http://www.smartisan.com/#/insurance" target="_blank">《延长保修服务条款》</a>。']},100010302:{sku:100010302,aliases:"nutsAccident",postName:"safety1",name:"意外保修服务",category:"坚果手机",categoryShort:"nuts",price:99,pageCss:"warranty-accident",nutsImg:"view/img/store/mobile/nuts-page-warranty-accident.png",img:"view/img/store/mobile/04.png",cartImage:"view/img/store/mobile/04.png",pageImg:"view/img/store/mobile/phonecare-plus.png",dialogImg:"view/img/store/mobile/dialog-phonecare-normal.png",warning:"您选购的保修服务不支持单独退款，仅可以随手机订单一同退款。",introduction:["在您购买意外保修服务后的一年内，由于摔落碎屏、液体泼溅、挤压等意外损伤造成的手机硬件故障，将可以获得最多两次维修，或 1 次主机更换。","（本服务优先采取维修服务，若锤子数码售后服务中心确认无法修复，则进行主机更换。）您可选择在购机时购买，或收货次日起 3 日内购买本服务。",'服务细则参见<a href="http://www.smartisan.com/#/repair" target="_blank">《意外损坏保修服务条款》</a>。']},100010301:{sku:100010301,aliases:"nutsDelay",postName:"safety2",name:"延长保修服务",category:"坚果手机",categoryShort:"nuts",price:99,pageCss:"warranty-delay",nutsImg:"view/img/store/mobile/nuts-page-warranty-delay.png",img:"view/img/store/mobile/05.png",cartImage:"view/img/store/mobile/05.png",pageImg:"view/img/store/mobile/phonecare-plus-1.png",dialogImg:"view/img/store/mobile/dialog-phonecare-other.png",warning:"您选购的保修服务支持单独退款，也可以随手机订单一同退款。",introduction:["如您购买本服务，在手机正常“三包” 1 年保修期结束后，将额外多获得 1 年保修服务。","延长保修服务期为 1 年，自手机正常“三包” 1 年服务期的截止日之次日零时开始，至第二年对应日之 24 时结束。",'服务细则参见<a href="http://www.smartisan.com/#/insurance" target="_blank">《延长保修服务条款》</a>。']},100021401:{sku:100021401,aliases:"m1Accident",postName:"safety1",name:"意外保修服务",category:"M1",categoryShort:"m1",price:99,pageCss:"warranty-accident",nutsImg:"view/img/store/mobile/nuts-page-warranty-accident.png",img:"view/img/store/mobile/05.png",cartImage:"view/img/store/mobile/05.png",pageImg:"view/img/store/mobile/phonecare-plus-1.png",dialogImg:"view/img/store/mobile/dialog-phonecare-other.png",warning:"您选购的保修服务支持单独退款，也可以随手机订单一同退款。",introduction:["在您购买意外保修服务后的一年内，由于摔落碎屏、液体泼溅、挤压等意外损伤造成的手机硬件故障，将可以获得最多两次维修，或 1 次主机更换。","（本服务优先采取维修服务，若锤子数码售后服务中心确认无法修复，则进行主机更换。）您可选择在购机时购买，或收货次日起 3 日内购买本服务。",'服务细则参见<a href="http://www.smartisan.com/#/repair" target="_blank">《意外损坏保修服务条款》</a>。']},100021501:{sku:100021501,aliases:"m1Delay",postName:"safety2",name:"延长保修服务",category:"M1",categoryShort:"m1",price:99,pageCss:"warranty-delay",nutsImg:"view/img/store/mobile/nuts-page-warranty-delay.png",img:"view/img/store/mobile/05.png",cartImage:"view/img/store/mobile/05.png",pageImg:"view/img/store/mobile/phonecare-plus-1.png",dialogImg:"view/img/store/mobile/dialog-phonecare-other.png",warning:"您选购的保修服务支持单独退款，也可以随手机订单一同退款。",introduction:["如您购买本服务，在手机正常“三包” 1 年保修期结束后，将额外多获得 1 年保修服务。","延长保修服务期为 1 年，自手机正常“三包” 1 年服务期的截止日之次日零时开始，至第二年对应日之 24 时结束。",'服务细则参见<a href="http://www.smartisan.com/#/insurance" target="_blank">《延长保修服务条款》</a>。']},100021601:{sku:100021601,aliases:"m1lAccident",postName:"safety1",name:"意外保修服务",category:"M1L",categoryShort:"m1l",price:99,pageCss:"warranty-accident",nutsImg:"view/img/store/mobile/nuts-page-warranty-accident.png",img:"view/img/store/mobile/05.png",cartImage:"view/img/store/mobile/05.png",pageImg:"view/img/store/mobile/phonecare-plus-1.png",dialogImg:"view/img/store/mobile/dialog-phonecare-other.png",warning:"您选购的保修服务支持单独退款，也可以随手机订单一同退款。",introduction:["在您购买意外保修服务后的一年内，由于摔落碎屏、液体泼溅、挤压等意外损伤造成的手机硬件故障，将可以获得最多两次维修，或 1 次主机更换。","（本服务优先采取维修服务，若锤子数码售后服务中心确认无法修复，则进行主机更换。）您可选择在购机时购买，或收货次日起 3 日内购买本服务。",'服务细则参见<a href="http://www.smartisan.com/#/repair" target="_blank">《意外损坏保修服务条款》</a>。']},100021701:{sku:100021701,aliases:"m1lDelay",postName:"safety2",name:"延长保修服务",category:"M1L",categoryShort:"m1l",price:99,pageCss:"warranty-delay",nutsImg:"view/img/store/mobile/nuts-page-warranty-delay.png",img:"view/img/store/mobile/05.png",cartImage:"view/img/store/mobile/05.png",pageImg:"view/img/store/mobile/phonecare-plus-1.png",dialogImg:"view/img/store/mobile/dialog-phonecare-other.png",warning:"您选购的保修服务支持单独退款，也可以随手机订单一同退款。",introduction:["如您购买本服务，在手机正常“三包” 1 年保修期结束后，将额外多获得 1 年保修服务。","延长保修服务期为 1 年，自手机正常“三包” 1 年服务期的截止日之次日零时开始，至第二年对应日之 24 时结束。",'服务细则参见<a href="http://www.smartisan.com/#/insurance" target="_blank">《延长保修服务条款》</a>。']}},new n}]),appsServices.factory("TimeStampService",["$rootScope","$q","Config","Utils","CartRequest",function(e,t,o,i,a){var r={getServerTime:function(){var e=t.defer();return a.getTimeStamp().then(function(t){e.resolve(0===t.code?{now:t.data.curtime}:{now:null})}),e.promise}};return r}]),appsFilters.filter("realImage",["StoreConfig",function(e){return function(t,o,i){var i=i||"jpg";if(t){if(_.indexOf(t.split(","),".png")>-1)return t;var a=e.isRetina,r="";return r=a?t+o+"X"+o+"@2x."+i:t+o+"X"+o+"."+i}return""}}]).filter("onlineImage",["StoreConfig","Utils","$cookies",function(e,t,o){var i=[function(t,o,i){if(t){if(_.indexOf(t.split(","),".png")>-1)return t;var a=e.isRetina,r="";return t.indexOf("http://")<0&&(t="http://img01.smartisanos.cn/"+t),r=a?t+o+"X"+o+"@2x."+i:t+o+"X"+o+"."+i}return""},function(t,o,i){if(!t)return"";var a=e.isRetina;return o=a?2*o:o,t+"@0o_0l_"+o+"w_100q.src"}];return function(e,t,o,a){o=o||0;var a=a||"jpg";return o=parseInt(o),i[o](e,t,a)}}]).filter("smartImg",["StoreConfig","Utils",function(e,t){var o,i="",a="",r=t.isSupportWebP(),n=e.isRetina,s={fool:function(e,t,o){return _.indexOf(e.split(","),".png")>-1?e:(e.indexOf("http://")<0&&(e="http://img01.smartisanos.cn/"+e),/detail(@\d+x\.(jpg|png))|detail\.(jpg|png)/.test(e)?e:n?e+t+"X"+t+"@2x."+o:e+t+"X"+t+"."+o)},smart:function(e,t,o){if(o&&a!=o){var s,c,l,u,m,g=o.split(","),d="";if(g.length>0){a=o;for(var p=0;p<g.length;++p)g[p]&&(s=g[p].split("_"),"w"===s[0]?c=n?2*s[1]:s[1]:"q"===s[0]||"Q"===s[0]?l=s[0]+"_"+s[1]:"i"===s[0]?u=s[1]:"ch"===s[0]&&(m=s[1]));c&&(d+="/resize,w_"+c),u&&m&&(d+="/indexcrop,y_"+m+",i_"+u),l&&(d+="/quality,"+l),d&&(d="?x-oss-process=image"+d)}r&&(d+="/format,webp"),u&&m&&(e=e.replace("#i_"+u,"")),i=d}return e+i}};return function(e,t,i,a,r){return e?i?s.smart(e,t,a):(o=r||"jpg",s.fool(e,t,o)):""}}]).filter("retinaSrc",["StoreConfig",function(e){return function(e){var t="@2x",o=e.split(".");return o.length<2?url:(o[o.length-2]+=t,o.join("."))}}]).filter("nextDate",["StoreConfig",function(e){return function(e){var t=new Date,e=0|e;return t.setDate(t.getDate()+e),t}}]).filter("floatNumber",["StoreConfig",function(e){return function(e,t){var o=e+"",i=o,a="";return o.match(/[^\d\.]/)?e:(o.match(/\./)&&(i=o.replace(/\..*$/gi,""),a=o.replace(/^[^\.]+\.?/gi,""),a=a.replace(/^(\d{1,2})\d*/,"$1"),a=2==a.length?a:a+"0"),t?i+"."+(""==a?"00":a):i+"."+(""==a?"00":a)-0)}}]).filter("rmb",["StoreConfig",function(e){return function(e,t,o,i){if(void 0==e)return 0;e=(+e).toFixed(2);var a=e+"",r=a,n="";if(a.match(/[^\d\.]/))return e;a.match(/\./)&&(r=a.replace(/\..*$/gi,""),n=a.replace(/^[^\.]+\.?/gi,""),n=n.replace(/^(\d{1,2})\d*/,"$1"),n=2==n.length?n:n+"0");for(var s=r.split("").reverse(),c=[],l=0;l<s.length;l++)l%3==0&&c.push(","),c.push(s[l]);var u=c.reverse().join("").replace(/\,$/gi,"");return u=o?u:"¥ "+u,("boolean"==typeof t&&t||"true"==t)&&(u=u+"."+(""==n?"00":n)),i&&(u+=" "+i),u}}]).filter("decimal",["StoreConfig","$filter",function(e,t){return function(e,o){var i=t("rmb")(e,o),a=i.indexOf("¥ ");return i=a>=0?i.substr(a+2):i}}]).filter("ellipsis",["StoreConfig","$filter",function(e,t){return function(e,t){var e=e+"",o="",i=e.replace(/[^\x00-\xff]/g,">>");if(i.length<=2*t)return e;var a=i.substr(0,2*t).split(">>"),r=0;return $.each(a,function(t,i){""==i?(o+=e.substr(r,1),r++):(o+=e.substr(r,i.length),r+=i.length)}),o+"..."}}]).filter("ellipsisLast3",["StoreConfig","$filter",function(e,t){return function(e,o){function i(e){for(var t="",o=0;o<e.length;o++)t+=e.charAt(e.length-o-1);return t}var e=e+"",a=e.replace(/[^\x00-\xff]/g,">>");if(a.length<=2*o)return e;var r=t("ellipsis")(e,o-3),n=t("ellipsis")(i(e),2);return n=i(n.replace(/...$/,"")),r+n}}]).filter("numberFormat",[function(){return function(e,t,o){if("undefined"==typeof o||0===+o)return Math[t](e);if(e=(+e).toFixed(2),o=+o,isNaN(e)||"number"!=typeof o||o%1!==0)return NaN;e=e.toString().split("e"),e=Math[t](+(e[0]+"e"+(e[1]?+e[1]-o:-o))),e=e.toString().split("e");var i=+(e[0]+"e"+(e[1]?+e[1]+o:o));return o<0&&(i=i.toFixed(-o)),i}}]).filter("dateFormat",[function(){return function(e,t){"string"==typeof e&&(e=e.replace(/-/g,"/"),e=new Date(e)),e=e instanceof Date?e:new Date(e);var o={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in o)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?o[i]:("00"+o[i]).substr((""+o[i]).length)));return t}}]),appsDirectives.directive("mobileDevice",["Utils",function(e){return{restrict:"A",link:function(t,o,i,a){var r="";if(e.isMobile()){var n=navigator.userAgent.toLowerCase(),s="iphone os"==n.match(/iphone os/i),c="android"==n.match(/android/i);s?r="device-iphone":c&&(r="device-android"),$(o).addClass(r),$("body").addClass(r)}}}}]).directive("headerPath",["$rootScope",function(e){return{restrict:"A",link:function(t,o,i,a){o&&(_.indexOf(location.host.split("#"),"www.smartisan.com")>-1?(e.rootShopPath="http://www.smartisan.com/shop/",e.rootIndexPath="http://www.smartisan.com/#/shop"):(e.rootShopPath="http://"+location.host+"/smartisan/modules/shop/",e.rootIndexPath="../index/#/shop"))}}}]).directive("navDrop",["CartRequest","$rootScope","$timeout",function(e,t,o){return{restrict:"EA",link:function(i,a,r,n){if(a){var s=[],c=$(".nav-sub"),l=$(".nav-sub-jianguopro");o(function(){t.subHeaderJianguopro||(i.navGoods=[{name:"坚果 Pro",price:1499,link:"../shop/#/jianguopro",sku:100027306},{name:"Smartisan M1 / M1L",link:"../shop/#/buyphone/m1",sku:100021202}],angular.forEach(i.navGoods,function(e,t){s.push(e.sku)}),e.getSkusInfo({ids:s.join(",")}).then(function(e){e.code||angular.forEach(i.navGoods,function(t,o){var o=_.findIndex(e.data.list,{id:t.sku});o>=0&&(t.price=t.price||e.data.list[o].price,t.image=e.data.list[o].shop_info.ali_image)})}),c.on("mouseenter",".nav-list > li > a",function(e){var t=$(e.target);if(!t.hasClass("js-toggle-nav")&&c.hasClass("active")&&c.removeClass("active"),t.hasClass("js-toggle-nav")&&!c.hasClass("active"))return e.preventDefault(),c.addClass("active"),!1}),c.on("mouseleave",function(e){!c.hasClass("fixed")&&c.hasClass("active")&&c.removeClass("active")}))});var u=function(){var e=$(window).height(),o=$(document.body).height(),i=c.find(".nav-sub-wrapper")||l.find(".nav-sub-wrapper"),a=i.length>0?i.parent().height()/2-10+$(".nav-global").height():135;$(".header-sub-shop").hasClass("hide")||$(".header-sub-shop").hasClass("js-header-sub-nofixed")||e+$(window).scrollTop()+i.parent().height()/2<o&&($(window).scrollTop()>=a?t.subHeaderJianguopro?$(".header-desktop.header-sub-shop").addClass("fixed"):$(".header-desktop").addClass("fixed"):$(".header-desktop").removeClass("fixed"))};$(window).on("scroll.navFixed",u)}}}}]).directive("cartMain",["$rootScope","$document","$filter","$timeout","CartReBuildService","StoreConfig","Config","PhonesConfig","AddCartAnimation",function(e,t,o,i,a,r,n,s,c){return{restrict:"A",link:function(t,o,a,r){if(o){var n=null,s=null;e.$watch("isLoggedIn",function(){e.isLoggedIn===!1?t.cartLoginUrl="https://account.smartisan.com/#/v2/login?return_url="+encodeURIComponent(t.rootShopPath+"#/cart"):e.isLoggedIn===!0&&(t.cartLoginUrl=t.rootShopPath+"#/cart")}),e.$broadcast("cart",{name:"sync"}),t.removeCartItem=function(t,o,a){if(!e.isMobile){var r=$(".nav-global"),s=r.find(".js-cart-item[data-id="+t+"]:not(.cart-subdiscount-item)");o?s.addClass("carts-items-removed"):(s.parent().height(s.parent().height()),i(function(){s.parent().addClass("carts-items-removed")},0))}n=i(function(){e.$broadcast("cart",{name:"singleDel",sku:t,attach:o,isMobile:a,callback:function(){i.cancel(n)}})},400)},$(o).hover(function(e){e.preventDefault(),$(this).addClass("active"),c.clearTimeMenuHide(),s=i(function(){$(".nav-global .nav-aside .nav-cart-list .nav-cart-items").scrollLock()},100)},function(e){e.preventDefault(),$(this).removeClass("active"),i.cancel(s)})}}}}]);